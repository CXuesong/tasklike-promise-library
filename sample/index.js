!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.ts")}({"../packages/tasklike-promise-library/dist/cancellation.js":
/*!*****************************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/cancellation.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,null==n?"Promise execution has been cancelled.":n)||this;return r.name="PromiseCancelledError",Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.PromiseCancelledError=o;var s=function(){function e(){}return Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return!!this._cancellationPromise&&!this._notifyCancel},enumerable:!0,configurable:!0}),e.prototype._ensurePromiseInitialized=function(){var e=this;this._cancellationPromise||(this._cancellationPromise=new Promise(function(t,n){e._notifyCancel=t}))},e.prototype.__int_cancel=function(){this._ensurePromiseInitialized(),this._notifyCancel&&(this._notifyCancel(),this._notifyCancel=void 0)},e.prototype.throwIfCancellationRequested=function(){if(this._cancellationPromise&&!this._notifyCancel)throw new o},e.prototype.subscribe=function(e){this._ensurePromiseInitialized(),this._cancellationPromise.then(e)},Object.defineProperty(e.prototype,"promise",{get:function(){return this._ensurePromiseInitialized(),this._cancellationPromise},enumerable:!0,configurable:!0}),e}(),a=new s;a.__int_cancel();var c=function(){function e(e){null!=e&&this.cancelAfter(e)}return Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return!!this._cancellationToken&&this._cancellationToken.isCancellationRequested},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this._cancellationToken?this._cancellationToken.__int_cancel():this._cancellationToken=a},e.prototype.cancelAfter=function(e){var t=this;if(e<0)throw new RangeError("delay (arg#1) should be a non-negative number.");0===e?this.cancel():setTimeout(function(){t.cancel()},e)},Object.defineProperty(e.prototype,"token",{get:function(){return this._cancellationToken||(this._cancellationToken=new s),this._cancellationToken},enumerable:!0,configurable:!0}),e.race=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=new e,i=function(){r.cancel()},o=0,s=t;o<s.length;o++){var a=s[o];a&&a.subscribe(i)}return r},e}();t.CancellationTokenSource=c},"../packages/tasklike-promise-library/dist/common.js":
/*!***********************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/common.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! ./cancellation */"../packages/tasklike-promise-library/dist/cancellation.js"),i=n(/*! ./promiseResolutionSource */"../packages/tasklike-promise-library/dist/promiseResolutionSource.js"),o=Promise.resolve();t.delay=function(e,t){if(e<0)throw new RangeError("milliseconds (arg#1) should be a non-negative number.");t&&t.throwIfCancellationRequested();var n=new i.PromiseResolutionSource,o=setTimeout(function(){n.tryResolve()},e);return t&&t.subscribe(function(){clearTimeout(o),n.tryReject(new r.PromiseCancelledError)}),n.promise},t.yielded=function(){return o},t.fromResolved=function(e){return Promise.resolve(e)},t.fromRejected=function(e){return Promise.reject(e)},t.fromCancelled=function(){return Promise.reject(new r.PromiseCancelledError)}},"../packages/tasklike-promise-library/dist/http.js":
/*!*********************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/http.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(/*! ./cancellation */"../packages/tasklike-promise-library/dist/cancellation.js"),s=n(/*! ./promiseResolutionSource */"../packages/tasklike-promise-library/dist/promiseResolutionSource.js"),a=function(e){function t(n){var r=e.call(this,null==n?"The HTTP request has failed.":n)||this;return r.name="HttpRequestError",Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.HttpRequestError=a;var c=function(){function e(e){this.xhr=e,this.statusCode=this.xhr.status,this.statusText=this.xhr.statusText,this.isSuccessfulStatusCode=this.xhr.status>=200&&this.xhr.status<=299,console.assert(e)}return e.prototype.ensureSuccessfulStatusCode=function(){if(!this.isSuccessfulStatusCode)throw new a("The HTTP response code "+this.statusCode+" indicates failure.")},e}();t.sendRequest=function(e,t){t&&t.throwIfCancellationRequested();var n=new XMLHttpRequest,r=new s.PromiseResolutionSource;if(null!=e.username||null!=e.password?n.open(e.method,e.url,!0,e.username,e.password):n.open(e.method,e.url),e.timeout&&(n.timeout=e.timeout),e.headers)for(var i in e.headers)Object.prototype.hasOwnProperty.call(e.headers,i)&&n.setRequestHeader(i,e.headers[i]);return null!=e.responseType&&(n.responseType=e.responseType),null!=e.withCredentials&&(n.withCredentials=e.withCredentials),n.onload=function(){console.assert(4==n.readyState),r.tryResolve(new c(n))},n.onerror=function(){r.tryReject(new a("An error occurred while sending the HTTP request."))},n.ontimeout=function(){r.tryReject(new o.PromiseCancelledError("HTTP request timeout has reached."))},t&&t.subscribe(function(){r.tryCancel()&&n.abort()}),n.send(e.body),r.promise}},"../packages/tasklike-promise-library/dist/index.js":
/*!**********************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/index.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(/*! ./common */"../packages/tasklike-promise-library/dist/common.js")),r(n(/*! ./cancellation */"../packages/tasklike-promise-library/dist/cancellation.js")),r(n(/*! ./http */"../packages/tasklike-promise-library/dist/http.js")),r(n(/*! ./promiseResolutionSource */"../packages/tasklike-promise-library/dist/promiseResolutionSource.js"))},"../packages/tasklike-promise-library/dist/promiseResolutionSource.js":
/*!****************************************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/promiseResolutionSource.js ***!
  \****************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! ./cancellation */"../packages/tasklike-promise-library/dist/cancellation.js"),i=function(){function e(){}return e.prototype._ensurePromiseInitialized=function(){var e=this;null==this._promise&&(this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n}))},Object.defineProperty(e.prototype,"promise",{get:function(){return this._ensurePromiseInitialized(),this._promise},enumerable:!0,configurable:!0}),e.prototype.tryResolve=function(e){return this._ensurePromiseInitialized(),!!this._resolve&&(this._resolve(e),this._resolve=this._reject=void 0,!0)},e.prototype.tryCancel=function(){return this._ensurePromiseInitialized(),!!this._reject&&(this._reject(new r.PromiseCancelledError),this._resolve=this._reject=void 0,!0)},e.prototype.tryReject=function(e){return this._ensurePromiseInitialized(),!!this._reject&&(this._reject(e),this._resolve=this._reject=void 0,!0)},e}();t.PromiseResolutionSource=i},"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=n(/*! tasklike-promise-library */"../packages/tasklike-promise-library/dist/index.js"),a=o(n(/*! tasklike-promise-library */"../packages/tasklike-promise-library/dist/index.js"));function c(e,t){return t?t.querySelector(e):document.querySelector(e)}function l(e){var t=document.createElement("div");return t.classList.add("error"),t.innerText=e&&e.stack||String(e),t}function u(e,t){var n=document.createElement("div");return n.innerText=t,e.appendChild(n),n}function d(e,t,n){return r(this,void 0,void 0,function(){var r,o,a,u,d,f;return i(this,function(i){switch(i.label){case 0:r=new s.CancellationTokenSource,o=function(){r.cancel()},a=c(t),(u=n?c(n):null)&&(u.addEventListener("click",o),u.disabled=!1),a.innerText="",i.label=1;case 1:return i.trys.push([1,4,5,6]),(d=e(a,u?r.token:void 0))?[4,d]:[3,3];case 2:i.sent(),i.label=3;case 3:return[3,6];case 4:return f=i.sent(),a.appendChild(l(f)),[3,6];case 5:return u&&(u.removeEventListener("click",o),u.disabled=!0),[7];case 6:return[2]}})})}function f(e){u(e,"Caller: Call myAsyncFunction."),function(){r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return u(e,"Callee: Do some work synchronously in myAsyncFunction…"),u(e,"Callee: myAsyncFunction is to yield…"),[4,s.yielded()];case 1:return t.sent(),u(e,"Callee: back from yielded state…"),u(e,"Callee: exiting."),[2]}})})}(),u(e,"Caller: We decide don't await for myAsyncFunction."),u(e,"Caller: exiting.")}function p(e,t){return r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return n=u(e,"Delay 0ms (SetTimeout(0) + yielded)."),[4,s.delay(0,t)];case 1:return r.sent(),n.innerText+=" Finished.",n=u(e,"Delay 500ms."),[4,s.delay(500,t)];case 2:return r.sent(),n.innerText+=" Finished.",n=u(e,"Delay 1s."),[4,s.delay(1e3,t)];case 3:return r.sent(),n.innerText+=" Finished.",n=u(e,"Delay 2s."),[4,s.delay(2e3,t)];case 4:return r.sent(),n.innerText+=" Finished.",n=u(e,"Delay 3s."),[4,s.delay(3e3,t)];case 5:return r.sent(),n.innerText+=" Finished.",u(e,"----------"),[2]}})})}function h(e,t){return r(this,void 0,void 0,function(){function n(n){return r(this,void 0,void 0,function(){var r,o,a,c;return i(this,function(i){switch(i.label){case 0:r=u(e,n.method+" request to "+n.url+"…"),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,s.sendRequest(n,t)];case 2:return o=i.sent(),r.innerText+=" "+o.statusCode+" "+o.statusText,u(e,"Content-Type: "+o.xhr.getResponseHeader("Content-Type")),(a=document.createElement("pre")).classList.add("http-response-body"),a.innerText=o.xhr.responseText,e.appendChild(a),r=u(e,"ensureSuccessfulStatusCode…"),o.ensureSuccessfulStatusCode(),r.innerText+=" Successful.",[3,5];case 3:if((c=i.sent())instanceof s.PromiseCancelledError)throw console.assert(t&&t.isCancellationRequested),c;return e.appendChild(l(c)),[3,5];case 4:return u(e,"----------"),[7];case 5:return[2]}})})}return i(this,function(e){switch(e.label){case 0:return[4,n({url:"tsconfig.json?rand="+Math.random(),method:"GET",timeout:2e3})];case 1:return e.sent(),[4,n({url:"tsconfig.json",method:"POST"})];case 2:return e.sent(),[2]}})})}c("#tpl-yielded-run").addEventListener("click",function(){return d(f,"#tpl-yielded-panel")}),c("#tpl-delay-run").addEventListener("click",function(){return d(p,"#tpl-delay-panel","#tpl-delay-cancel")}),c("#tpl-sendrequest-run").addEventListener("click",function(){return d(h,"#tpl-sendrequest-panel","#tpl-sendrequest-cancel")}),window.TPL=a}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4uL3BhY2thZ2VzL3Rhc2tsaWtlLXByb21pc2UtbGlicmFyeS9kaXN0L2NhbmNlbGxhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi4vcGFja2FnZXMvdGFza2xpa2UtcHJvbWlzZS1saWJyYXJ5L2Rpc3QvY29tbW9uLmpzIiwid2VicGFjazovLy8uLi9wYWNrYWdlcy90YXNrbGlrZS1wcm9taXNlLWxpYnJhcnkvZGlzdC9odHRwLmpzIiwid2VicGFjazovLy8uLi9wYWNrYWdlcy90YXNrbGlrZS1wcm9taXNlLWxpYnJhcnkvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi4vcGFja2FnZXMvdGFza2xpa2UtcHJvbWlzZS1saWJyYXJ5L2Rpc3QvcHJvbWlzZVJlc29sdXRpb25Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsInRoaXMiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIl9fIiwiY29uc3RydWN0b3IiLCJQcm9taXNlQ2FuY2VsbGVkRXJyb3IiLCJfc3VwZXIiLCJtZXNzYWdlIiwiX3RoaXMiLCJFcnJvciIsIkNhbmNlbGxhdGlvblRva2VuIiwiX2NhbmNlbGxhdGlvblByb21pc2UiLCJfbm90aWZ5Q2FuY2VsIiwiY29uZmlndXJhYmxlIiwiX2Vuc3VyZVByb21pc2VJbml0aWFsaXplZCIsIlByb21pc2UiLCJyZXMiLCJyZWoiLCJfX2ludF9jYW5jZWwiLCJ1bmRlZmluZWQiLCJ0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJ0aGVuIiwiY2FuY2VsbGVkVG9rZW4iLCJDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSIsImNhbmNlbEFmdGVyRGVsYXkiLCJjYW5jZWxBZnRlciIsIl9jYW5jZWxsYXRpb25Ub2tlbiIsImlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIiwiY2FuY2VsIiwiZGVsYXkiLCJSYW5nZUVycm9yIiwic2V0VGltZW91dCIsInJhY2UiLCJjYW5jZWxsYXRpb25Ub2tlbnMiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImN0cyIsImNhbmNlbGxhdGlvbkNhbGxiYWNrIiwiX2EiLCJjYW5jZWxsYXRpb25Ub2tlbnNfMSIsInRva2VuIiwiY2FuY2VsbGF0aW9uXzEiLCJwcm9taXNlUmVzb2x1dGlvblNvdXJjZV8xIiwiX3lpZWxkZWRQcm9taXNlIiwicmVzb2x2ZSIsIm1pbGxpc2Vjb25kcyIsImNhbmNlbGxhdGlvblRva2VuIiwicHJzIiwiUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UiLCJpZCIsInRyeVJlc29sdmUiLCJjbGVhclRpbWVvdXQiLCJ0cnlSZWplY3QiLCJwcm9taXNlIiwieWllbGRlZCIsImZyb21SZXNvbHZlZCIsInJlc3VsdCIsImZyb21SZWplY3RlZCIsInJlYXNvbiIsInJlamVjdCIsImZyb21DYW5jZWxsZWQiLCJIdHRwUmVxdWVzdEVycm9yIiwiWGhyUmVzcG9uc2UiLCJ4aHIiLCJzdGF0dXNDb2RlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImlzU3VjY2Vzc2Z1bFN0YXR1c0NvZGUiLCJjb25zb2xlIiwiYXNzZXJ0IiwiZW5zdXJlU3VjY2Vzc2Z1bFN0YXR1c0NvZGUiLCJzZW5kUmVxdWVzdCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJvcGVuIiwibWV0aG9kIiwidXJsIiwidGltZW91dCIsImhlYWRlcnMiLCJuYW1lXzEiLCJzZXRSZXF1ZXN0SGVhZGVyIiwicmVzcG9uc2VUeXBlIiwid2l0aENyZWRlbnRpYWxzIiwib25sb2FkIiwicmVhZHlTdGF0ZSIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJ0cnlDYW5jZWwiLCJhYm9ydCIsInNlbmQiLCJib2R5IiwiX19leHBvcnQiLCJfcHJvbWlzZSIsIl9yZXNvbHZlIiwiX3JlamVjdCIsIiQiLCJzZWxlY3RvciIsInNjb3BlIiwicXVlcnlTZWxlY3RvciIsImRvY3VtZW50IiwiYnVpbGRFcnJvclBhbmVsIiwiZXJyb3IiLCJlcnJCb3giLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJUZXh0Iiwic3RhY2siLCJTdHJpbmciLCJhcHBlbmRMaW5lIiwiY29udGFpbmVyIiwiY29udGVudCIsImxpbmUiLCJhcHBlbmRDaGlsZCIsInJ1bkRlbW8iLCJkZW1vRnVuYyIsInBhbmVsU2VsZWN0b3IiLCJjYW5jZWxsYXRpb25CdXR0b25TZWxlY3RvciIsIm9uQ2FuY2VsIiwicGFuZWwiLCJjYW5jZWxCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzYWJsZWQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGVtb1lpZWxkIiwibXlBc3luY0Z1bmN0aW9uIiwiZGVtb0RlbGF5IiwiY3QiLCJsYXN0TGluZSIsImRlbW9IdHRwIiwic2VuZEFuZFJlcG9ydCIsInJlc3BvbnNlIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJib2R5Q29udGFpbmVyIiwicmVzcG9uc2VUZXh0IiwiTWF0aCIsInJhbmRvbSIsIndpbmRvdyIsIlRQTCIsInRwbEFtYmllbnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdB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MUU3QixFQUFFLGtCQUFtQjBCLGlCQUFpQixRQUFTLFdBQU0sT0FBQVAsRUFBUVksRUFBVyxtQkFBb0IsdUJBQzVGL0IsRUFBRSx3QkFBeUIwQixpQkFBaUIsUUFBUyxXQUFNLE9BQUFQLEVBQVFlLEVBQVUseUJBQTBCLDZCQUV0R1EsT0FBaURDLElBQU1DIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvaW5kZXgudHNcIik7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuLy8gSW1wb3J0IGFzIGZldyAuL3NyYyBtb2R1bGVzIGFzIHBvc3NpYmxlLlxyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vKipcclxuICogQW4gZXJyb3IgdGhhdCByYWlzZXMgd2hlbiB0aGUgY3VycmVudCBwcm9taXNlIGhhcyBiZWVuIHJlamVjdGVkIGR1ZSB0byBjYW5jZWxsYXRpb24uXHJcbiAqXHJcbiAqIEVTNiBgUHJvbWlzZWAgZG9lcyBub3QgaGF2ZSBjYW5jZWxsYXRpb24gc3VwcG9ydCxcclxuICogc28gVFBMIHVzZXMgYHJlamVjdGAgd2l0aCBgUHJvbWlzZUNhbmNlbGxlZEVycm9yYCB0byBpbmRpY2F0ZSBhIGNhbmNlbGxlZCBgUHJvbWlzZWAuXHJcbiAqL1xyXG52YXIgUHJvbWlzZUNhbmNlbGxlZEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFByb21pc2VDYW5jZWxsZWRFcnJvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFByb21pc2VDYW5jZWxsZWRFcnJvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSA9PSBudWxsID8gXCJQcm9taXNlIGV4ZWN1dGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQuXCIgOiBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBcIlByb21pc2VDYW5jZWxsZWRFcnJvclwiO1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgUHJvbWlzZUNhbmNlbGxlZEVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2VDYW5jZWxsZWRFcnJvcjtcclxufShFcnJvcikpO1xyXG5leHBvcnRzLlByb21pc2VDYW5jZWxsZWRFcnJvciA9IFByb21pc2VDYW5jZWxsZWRFcnJvcjtcclxudmFyIENhbmNlbGxhdGlvblRva2VuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ2FuY2VsbGF0aW9uVG9rZW4oKSB7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FuY2VsbGF0aW9uVG9rZW4ucHJvdG90eXBlLCBcImlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5fY2FuY2VsbGF0aW9uUHJvbWlzZSAmJiAhdGhpcy5fbm90aWZ5Q2FuY2VsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ2FuY2VsbGF0aW9uVG9rZW4ucHJvdG90eXBlLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMuX2NhbmNlbGxhdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikgeyBfdGhpcy5fbm90aWZ5Q2FuY2VsID0gcmVzOyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FuY2VsbGF0aW9uVG9rZW4ucHJvdG90eXBlLl9faW50X2NhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5fbm90aWZ5Q2FuY2VsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeUNhbmNlbCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9ub3RpZnlDYW5jZWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhbmNlbGxhdGlvblRva2VuLnByb3RvdHlwZS50aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW5jZWxsYXRpb25Qcm9taXNlICYmICF0aGlzLl9ub3RpZnlDYW5jZWwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFByb21pc2VDYW5jZWxsZWRFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBUT0RPIHJldHVybiBzb21lIHNvcnQgb2YgSURpc3Bvc2FibGUuXHJcbiAgICBDYW5jZWxsYXRpb25Ub2tlbi5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fZW5zdXJlUHJvbWlzZUluaXRpYWxpemVkKCk7XHJcbiAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUHJvbWlzZS50aGVuKGNhbGxiYWNrKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FuY2VsbGF0aW9uVG9rZW4ucHJvdG90eXBlLCBcInByb21pc2VcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbGxhdGlvblByb21pc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQ2FuY2VsbGF0aW9uVG9rZW47XHJcbn0oKSk7XHJcbnZhciBjYW5jZWxsZWRUb2tlbiA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlbigpO1xyXG5jYW5jZWxsZWRUb2tlbi5fX2ludF9jYW5jZWwoKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gb3duZXIgb2Yge0BsaW5rIElDYW5jZWxsYXRpb25Ub2tlbn0gdGhhdCBjYW4gaW5pdGlhdGVzIHRoZSBjYW5jZWxsYXRpb24uXHJcbiAqL1xyXG52YXIgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBjYW5jZWxBZnRlckRlbGF5IEF1dG9tYXRpY2FsbHkgcmVxdWVzdHMgY2FuY2VsbGF0aW9uIGFmdGVyIHRoZSBzcGVjaWZpZWQgbm9uLW5lZ2F0aXZlIHRpbWUgaW4gbWlsbGlzZWNvbmRzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZShjYW5jZWxBZnRlckRlbGF5KSB7XHJcbiAgICAgICAgaWYgKGNhbmNlbEFmdGVyRGVsYXkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEFmdGVyKGNhbmNlbEFmdGVyRGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW5jZWxsYXRpb25Ub2tlblNvdXJjZS5wcm90b3R5cGUsIFwiaXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWRcIiwge1xyXG4gICAgICAgIC8qKiBXaGV0aGVyIHRoZSBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLl9jYW5jZWxsYXRpb25Ub2tlbiAmJiB0aGlzLl9jYW5jZWxsYXRpb25Ub2tlbi5pc0NhbmNlbGxhdGlvblJlcXVlc3RlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhdGVzIGNhbmNlbGxhdGlvbiBpZiBpdCBoYXMgbm90IGJlZW4gcmVxdWVzdGVkIHlldC5cclxuICAgICAqIE5vdGlmaWVzIHRoZSBkZXJpdmVkIGBJQ2FuY2VsbGF0aW9uVG9rZW5gIG9mIHRoZSBjYW5jZWxsYXRpb24uXHJcbiAgICAgKi9cclxuICAgIENhbmNlbGxhdGlvblRva2VuU291cmNlLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NhbmNlbGxhdGlvblRva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbmNlbGxhdGlvblRva2VuLl9faW50X2NhbmNlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uVG9rZW4gPSBjYW5jZWxsZWRUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWF0ZXMgY2FuY2VsbGF0aW9uIGFmdGVyIHRoZSBzcGVjaWZpZWQgZGVsYXkuXHJcbiAgICAgKiBAcGFyYW0gZGVsYXkgdGhlIG5vbi1uZWdhdGl2ZSB0aW1lIGluIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBpbml0aWF0aW5nIHRoZSBjYW5jZWxsYXRpb24uXHJcbiAgICAgKi9cclxuICAgIENhbmNlbGxhdGlvblRva2VuU291cmNlLnByb3RvdHlwZS5jYW5jZWxBZnRlciA9IGZ1bmN0aW9uIChkZWxheSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGRlbGF5IDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImRlbGF5IChhcmcjMSkgc2hvdWxkIGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZWxheSA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IF90aGlzLmNhbmNlbCgpOyB9LCBkZWxheSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW5jZWxsYXRpb25Ub2tlblNvdXJjZS5wcm90b3R5cGUsIFwidG9rZW5cIiwge1xyXG4gICAgICAgIC8qKiBHZXRzIHRoZSBkZXJpdmVkIGBJQ2FuY2VsbGF0aW9uVG9rZW5gIGZyb20gdGhpcyB0b2tlbiBzb3VyY2UuICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fY2FuY2VsbGF0aW9uVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbGxhdGlvblRva2VuID0gbmV3IENhbmNlbGxhdGlvblRva2VuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbGxhdGlvblRva2VuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGEgYENhbmNlbGxhdGlvblRva2VuU291cmNlYCB0aGF0IGdldHMgY2FuY2VsbGVkIHdoZW4gYW55IG9mIHRoZSBzcGVjaWZpZWQgYElDYW5jZWxsYXRpb25Ub2tlbmAgZ2V0cyBjYW5jZWxsZWQuXHJcbiAgICAgKiBAcGFyYW0gY2FuY2VsbGF0aW9uVG9rZW5zIE9uZSBvciBtb3JlIHVuZGVybHlpbmcgYElDYW5jZWxsYXRpb25Ub2tlbmAuXHJcbiAgICAgKi9cclxuICAgIENhbmNlbGxhdGlvblRva2VuU291cmNlLnJhY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNhbmNlbGxhdGlvblRva2VucyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbGxhdGlvblRva2Vuc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3RzID0gbmV3IENhbmNlbGxhdGlvblRva2VuU291cmNlKCk7XHJcbiAgICAgICAgdmFyIGNhbmNlbGxhdGlvbkNhbGxiYWNrID0gZnVuY3Rpb24gKCkgeyBjdHMuY2FuY2VsKCk7IH07XHJcbiAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBjYW5jZWxsYXRpb25Ub2tlbnNfMSA9IGNhbmNlbGxhdGlvblRva2VuczsgX2EgPCBjYW5jZWxsYXRpb25Ub2tlbnNfMS5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgdmFyIHRva2VuID0gY2FuY2VsbGF0aW9uVG9rZW5zXzFbX2FdO1xyXG4gICAgICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHRva2VuLnN1YnNjcmliZShjYW5jZWxsYXRpb25DYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN0cztcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2U7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgPSBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FuY2VsbGF0aW9uLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjYW5jZWxsYXRpb25fMSA9IHJlcXVpcmUoXCIuL2NhbmNlbGxhdGlvblwiKTtcclxudmFyIHByb21pc2VSZXNvbHV0aW9uU291cmNlXzEgPSByZXF1aXJlKFwiLi9wcm9taXNlUmVzb2x1dGlvblNvdXJjZVwiKTtcclxudmFyIF95aWVsZGVkUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4vKipcclxuICogR2V0cyBhIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIGFmdGVyIHRoZSBzcGVjaWZpZWQgdGltZSBvZiBkZWxheS5cclxuICogQHBhcmFtIG1pbGxpc2Vjb25kcyBub24tbmVnYXRpdmUgdGltZSBpbiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgdGhlIHJldHVybmVkIGBQcm9taXNlYCByZXNvbHZlcy5cclxuICogQHBhcmFtIGNhbmNlbGxhdGlvblRva2VuIGEgdG9rZW4gdXNlZCB0byBjYW5jZWwgdGhlIHJldHVybmVkIGBQcm9taXNlYC5cclxuICogQHNlZSB5aWVsZGVkXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWxheShtaWxsaXNlY29uZHMsIGNhbmNlbGxhdGlvblRva2VuKSB7XHJcbiAgICBpZiAobWlsbGlzZWNvbmRzIDwgMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwibWlsbGlzZWNvbmRzIChhcmcjMSkgc2hvdWxkIGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci5cIik7XHJcbiAgICB9XHJcbiAgICBjYW5jZWxsYXRpb25Ub2tlbiAmJiBjYW5jZWxsYXRpb25Ub2tlbi50aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCk7XHJcbiAgICB2YXIgcHJzID0gbmV3IHByb21pc2VSZXNvbHV0aW9uU291cmNlXzEuUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UoKTtcclxuICAgIC8vIFRPRE8gbWFrZSBzZXRUaW1lb3V0IGluamVjdGFibGUuXHJcbiAgICB2YXIgaWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcHJzLnRyeVJlc29sdmUoKTsgfSwgbWlsbGlzZWNvbmRzKTtcclxuICAgIGlmIChjYW5jZWxsYXRpb25Ub2tlbikge1xyXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChpZCk7XHJcbiAgICAgICAgICAgIHBycy50cnlSZWplY3QobmV3IGNhbmNlbGxhdGlvbl8xLlByb21pc2VDYW5jZWxsZWRFcnJvcigpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcnMucHJvbWlzZTtcclxufVxyXG5leHBvcnRzLmRlbGF5ID0gZGVsYXk7XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgYFByb21pc2VMaWtlYCBpbnN0YW5jZSB0aGF0LCB3aGVuIHVzZWQgd2l0aCBgYXdhaXRgIGV4cHJlc3Npb24sXHJcbiAqIGFzeW5jaHJvbm91c2x5IHlpZWxkcyBiYWNrIHRvIHRoZSBjb2RlIGJlbG93LiBUaGUgaW5zdGFuY2UgcmV0dXJuZWQgYmVoYXZlc1xyXG4gKiBsaWtlIHRoZSByZXR1cm5lZCB2YWx1ZSBvZiBgUHJvbWlzZS5yZXNvbHZlKClgLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgbWFqb3IgZGlmZmVyZW5jZSBiZXR3ZWVuIGB5aWVsZGVkKClgIGFuZCBgZGVsYXkoMClgLCBpcyB0aGF0IGBkZWxheWAgd2lsbFxyXG4gKiByZXNvbHZlIHRoZSByZXR1cm5lZCBgUHJvbWlzZWAgaW4gYSBgc2V0VGltZW91dGAgY2FsbGJhY2ssIGV2ZW4gaWYgdGhlIGRlbGF5IHRpbWUgaXMgYDBgLlxyXG4gKiBUaGlzIHdpbGwgY2F1c2UgYFByb21pc2VgIHJldHVybmVkIGJ5IGBkZWxheWAgYmUgKnJlc29sdmVkKiBpbiBtYXJjb1Rhc2sgcXVldWUgb24gc29tZSBleGVjdXRpb24gZW5naW5lLlxyXG4gKlxyXG4gKiBAc2VlIGRlbGF5XHJcbiAqL1xyXG5mdW5jdGlvbiB5aWVsZGVkKCkge1xyXG4gICAgcmV0dXJuIF95aWVsZGVkUHJvbWlzZTtcclxufVxyXG5leHBvcnRzLnlpZWxkZWQgPSB5aWVsZGVkO1xyXG4vKipcclxuICogR2V0cyBhIHJlc29sdmVkIGBQcm9taXNlYC5cclxuICogVGhpcyBmdW5jdGlvbiBiZWhhdmVzIHRoZSBzYW1lIGFzIGBQcm9taXNlLnJlc29sdmVgLlxyXG4gKiBAcGFyYW0gcmVzdWx0IHRoZSByZXN1bHQgb2YgdGhlIHJlc29sdmVkIGBQcm9taXNlYC5cclxuICovXHJcbmZ1bmN0aW9uIGZyb21SZXNvbHZlZChyZXN1bHQpIHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcclxufVxyXG5leHBvcnRzLmZyb21SZXNvbHZlZCA9IGZyb21SZXNvbHZlZDtcclxuLyoqXHJcbiAqIEdldHMgYSByZWplY3RlZCBgUHJvbWlzZWAuXHJcbiAqIFRoaXMgZnVuY3Rpb24gYmVoYXZlcyB0aGUgc2FtZSBhcyBgUHJvbWlzZS5yZWplY3RgLlxyXG4gKiBAcGFyYW0gcmVhc29uIHRoZSByZWplY3Rpb24gcmVhc29uLCBvciB0aGUgYEVycm9yYCBjYXVzaW5nIHRoZSByZWplY3Rpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBmcm9tUmVqZWN0ZWQocmVhc29uKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcclxufVxyXG5leHBvcnRzLmZyb21SZWplY3RlZCA9IGZyb21SZWplY3RlZDtcclxuLyoqXHJcbiAqIEdldHMgYSBjYW5jZWxsZWQgYFByb21pc2VgLlxyXG4gKlxyXG4gKiBBIGNhbmNlbGxlZCBgUHJvbWlzZWAgaXMgYSBgUHJvbWlzZWAgcmVqZWN0ZWQgd2l0aCB7QGxpbmsgUHJvbWlzZUNhbmNlbGxlZEVycm9yfS5cclxuICovXHJcbmZ1bmN0aW9uIGZyb21DYW5jZWxsZWQoKSB7XHJcbiAgICAvLyBXZSB3YW50IHRvIGNhcHR1cmUgdGhlIHN0YWNrIHRyYWNlLlxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBjYW5jZWxsYXRpb25fMS5Qcm9taXNlQ2FuY2VsbGVkRXJyb3IoKSk7XHJcbn1cclxuZXhwb3J0cy5mcm9tQ2FuY2VsbGVkID0gZnJvbUNhbmNlbGxlZDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY2FuY2VsbGF0aW9uXzEgPSByZXF1aXJlKFwiLi9jYW5jZWxsYXRpb25cIik7XHJcbnZhciBwcm9taXNlUmVzb2x1dGlvblNvdXJjZV8xID0gcmVxdWlyZShcIi4vcHJvbWlzZVJlc29sdXRpb25Tb3VyY2VcIik7XHJcbi8qKlxyXG4gKiBBbiBlcnJvciByYWlzZXMgd2hlbiBhbiBIVFRQIHJlcXVlc3QgZmFpbHMgZHVlIHRvIG5ldHdvcmsgdHJhbnNwb3J0YXRpb25cclxuICogb3Igc2VydmVyIHJlc3BvbnNlLlxyXG4gKi9cclxudmFyIEh0dHBSZXF1ZXN0RXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoSHR0cFJlcXVlc3RFcnJvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEh0dHBSZXF1ZXN0RXJyb3IobWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UgPT0gbnVsbCA/IFwiVGhlIEhUVFAgcmVxdWVzdCBoYXMgZmFpbGVkLlwiIDogbWVzc2FnZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5uYW1lID0gXCJIdHRwUmVxdWVzdEVycm9yXCI7XHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBIdHRwUmVxdWVzdEVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEh0dHBSZXF1ZXN0RXJyb3I7XHJcbn0oRXJyb3IpKTtcclxuZXhwb3J0cy5IdHRwUmVxdWVzdEVycm9yID0gSHR0cFJlcXVlc3RFcnJvcjtcclxudmFyIFhoclJlc3BvbnNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gWGhyUmVzcG9uc2UoeGhyKSB7XHJcbiAgICAgICAgdGhpcy54aHIgPSB4aHI7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gdGhpcy54aHIuc3RhdHVzO1xyXG4gICAgICAgIHRoaXMuc3RhdHVzVGV4dCA9IHRoaXMueGhyLnN0YXR1c1RleHQ7XHJcbiAgICAgICAgdGhpcy5pc1N1Y2Nlc3NmdWxTdGF0dXNDb2RlID0gdGhpcy54aHIuc3RhdHVzID49IDIwMCAmJiB0aGlzLnhoci5zdGF0dXMgPD0gMjk5O1xyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KHhocik7XHJcbiAgICB9XHJcbiAgICBYaHJSZXNwb25zZS5wcm90b3R5cGUuZW5zdXJlU3VjY2Vzc2Z1bFN0YXR1c0NvZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzU3VjY2Vzc2Z1bFN0YXR1c0NvZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEh0dHBSZXF1ZXN0RXJyb3IoXCJUaGUgSFRUUCByZXNwb25zZSBjb2RlIFwiICsgdGhpcy5zdGF0dXNDb2RlICsgXCIgaW5kaWNhdGVzIGZhaWx1cmUuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gWGhyUmVzcG9uc2U7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBTZW5kIGFuIEhUVFAgcmVxdWVzdCB3aXRoIGBYTUxIdHRwUmVxdWVzdGAuXHJcbiAqIEBwYXJhbSByZXF1ZXN0IHRoZSByZXF1ZXN0IHBhcmFtZXRlcnMuXHJcbiAqIEBwYXJhbSBjYW5jZWxsYXRpb25Ub2tlbiBhIHRva2VuIHVzZWQgdG8gY2FuY2VsIHRoZSBvcGVyYXRpb24gYW5kIGFib3J0IHRoZSBIVFRQIHJlcXVlc3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZW5kUmVxdWVzdChyZXF1ZXN0LCBjYW5jZWxsYXRpb25Ub2tlbikge1xyXG4gICAgY2FuY2VsbGF0aW9uVG9rZW4gJiYgY2FuY2VsbGF0aW9uVG9rZW4udGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZCgpO1xyXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgdmFyIHBycyA9IG5ldyBwcm9taXNlUmVzb2x1dGlvblNvdXJjZV8xLlByb21pc2VSZXNvbHV0aW9uU291cmNlKCk7XHJcbiAgICBpZiAocmVxdWVzdC51c2VybmFtZSAhPSBudWxsIHx8IHJlcXVlc3QucGFzc3dvcmQgIT0gbnVsbCkge1xyXG4gICAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSwgcmVxdWVzdC51c2VybmFtZSwgcmVxdWVzdC5wYXNzd29yZCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwpO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gSUUgdGhlIHRpbWVvdXQgcHJvcGVydHkgbWF5IG9ubHkgYmUgc2V0IGFmdGVyIGNhbGxpbmcgb3BlbiBhbmQgYmVmb3JlIGNhbGxpbmcgc2VuZC5cclxuICAgIGlmIChyZXF1ZXN0LnRpbWVvdXQpIHtcclxuICAgICAgICB4aHIudGltZW91dCA9IHJlcXVlc3QudGltZW91dDtcclxuICAgIH1cclxuICAgIGlmIChyZXF1ZXN0LmhlYWRlcnMpIHtcclxuICAgICAgICBmb3IgKHZhciBuYW1lXzEgaW4gcmVxdWVzdC5oZWFkZXJzKSB7XHJcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVxdWVzdC5oZWFkZXJzLCBuYW1lXzEpKSB7XHJcbiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lXzEsIHJlcXVlc3QuaGVhZGVyc1tuYW1lXzFdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChyZXF1ZXN0LnJlc3BvbnNlVHlwZSAhPSBudWxsKSB7XHJcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IHJlcXVlc3QucmVzcG9uc2VUeXBlO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzICE9IG51bGwpIHtcclxuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gcmVxdWVzdC53aXRoQ3JlZGVudGlhbHM7XHJcbiAgICB9XHJcbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KHhoci5yZWFkeVN0YXRlID09IDQpOyAvLyBET05FXHJcbiAgICAgICAgcHJzLnRyeVJlc29sdmUobmV3IFhoclJlc3BvbnNlKHhocikpO1xyXG4gICAgfTtcclxuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHBycy50cnlSZWplY3QobmV3IEh0dHBSZXF1ZXN0RXJyb3IoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzZW5kaW5nIHRoZSBIVFRQIHJlcXVlc3QuXCIpKTtcclxuICAgIH07XHJcbiAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHBycy50cnlSZWplY3QobmV3IGNhbmNlbGxhdGlvbl8xLlByb21pc2VDYW5jZWxsZWRFcnJvcihcIkhUVFAgcmVxdWVzdCB0aW1lb3V0IGhhcyByZWFjaGVkLlwiKSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVE9ETyBXZSBuZWVkIHVuc3Vic2NyaWJlIHRoaXMgd2hlbiBQcm9taXNlIHJlc29sdmVkLlxyXG4gICAgY2FuY2VsbGF0aW9uVG9rZW4gJiYgY2FuY2VsbGF0aW9uVG9rZW4uc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAocHJzLnRyeUNhbmNlbCgpKSB7XHJcbiAgICAgICAgICAgIHhoci5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgeGhyLnNlbmQocmVxdWVzdC5ib2R5KTtcclxuICAgIHJldHVybiBwcnMucHJvbWlzZTtcclxufVxyXG5leHBvcnRzLnNlbmRSZXF1ZXN0ID0gc2VuZFJlcXVlc3Q7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0dHAuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2NvbW1vblwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2NhbmNlbGxhdGlvblwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2h0dHBcIikpO1xyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9wcm9taXNlUmVzb2x1dGlvblNvdXJjZVwiKSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjYW5jZWxsYXRpb25fMSA9IHJlcXVpcmUoXCIuL2NhbmNlbGxhdGlvblwiKTtcclxuLyoqXHJcbiAqIFJlc29sdmVzIG9yIHJlamVjdHMgYSBgUHJvbWlzZWAgZnJvbSBvdXRzaWRlIG9mIGl0LlxyXG4gKi9cclxudmFyIFByb21pc2VSZXNvbHV0aW9uU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UoKSB7XHJcbiAgICB9XHJcbiAgICBQcm9taXNlUmVzb2x1dGlvblNvdXJjZS5wcm90b3R5cGUuX2Vuc3VyZVByb21pc2VJbml0aWFsaXplZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLl9wcm9taXNlID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuX3Jlc29sdmUgPSByZXM7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVqZWN0ID0gcmVqO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb21pc2VSZXNvbHV0aW9uU291cmNlLnByb3RvdHlwZSwgXCJwcm9taXNlXCIsIHtcclxuICAgICAgICAvKiogR2V0cyB0aGUgZGVyaXZlZCBgUHJvbWlzZWAgY29udHJvbGxlZCBieSB0aGUgY3VycmVudCBpbnN0YW5jZS4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5fZW5zdXJlUHJvbWlzZUluaXRpYWxpemVkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm9taXNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNvbHZlcyB0aGUgZGVyaXZlZCBgUHJvbWlzZWAgd2l0aCB0aGUgc3BlY2lmaWVkIHJlc3VsdC5cclxuICAgICAqIEBwYXJhbSByZXN1bHQgdGhlIHJlc29sdXRpb24gcmVzdWx0LCBvciBhIGBQcm9taXNlTGlrZWAgdGhhdCBjYW4gYmUgZnVydGhlcmx5ICpyZXNvbHZlZCouXHJcbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGRlcml2ZWQgYFByb21pc2VgIGhhcyBqdXN0IGJlZW4gKnJlc29sdmVkKjtcclxuICAgICAqIG90aGVyd2lzZSBpdCBtZWFucyB0aGUgYFByb21pc2VgIGhhcyBhbHJlYWR5IGJlZW4gKnNldHRsZWQqIGJlZm9yZS5cclxuICAgICAqL1xyXG4gICAgUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UucHJvdG90eXBlLnRyeVJlc29sdmUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy5fZW5zdXJlUHJvbWlzZUluaXRpYWxpemVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Jlc29sdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlID0gdGhpcy5fcmVqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FuY2VscyB0aGUgZGVyaXZlZCBgUHJvbWlzZWAuXHJcbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGRlcml2ZWQgYFByb21pc2VgIGhhcyBqdXN0IGJlZW4gKnJlamVjdGVkKiB3aXRoIGBQcm9taXNlQ2FuY2VsbGVkRXJyb3JgO1xyXG4gICAgICogb3RoZXJ3aXNlIGl0IG1lYW5zIHRoZSBgUHJvbWlzZWAgaGFzIGFscmVhZHkgYmVlbiAqc2V0dGxlZCogYmVmb3JlLlxyXG4gICAgICovXHJcbiAgICBQcm9taXNlUmVzb2x1dGlvblNvdXJjZS5wcm90b3R5cGUudHJ5Q2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2Vuc3VyZVByb21pc2VJbml0aWFsaXplZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLl9yZWplY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVqZWN0KG5ldyBjYW5jZWxsYXRpb25fMS5Qcm9taXNlQ2FuY2VsbGVkRXJyb3IoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSB0aGlzLl9yZWplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWplY3RzIHRoZSBkZXJpdmVkIGBQcm9taXNlYCB3aXRoIHRoZSBzcGVjaWZpZWQgcmFzb24uXHJcbiAgICAgKiBAcGFyYW0gcmVhc29uIHRoZSByZWplY3Rpb24gcmVhc29uLCBvciB0aGUgYEVycm9yYCBjYXVzaW5nIHRoZSByZWplY3Rpb24uXHJcbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGRlcml2ZWQgYFByb21pc2VgIGhhcyBqdXN0IGJlZW4gKnJlamVjdGVkKjtcclxuICAgICAqIG90aGVyd2lzZSBpdCBtZWFucyB0aGUgYFByb21pc2VgIGhhcyBhbHJlYWR5IGJlZW4gKnNldHRsZWQqIGJlZm9yZS5cclxuICAgICAqL1xyXG4gICAgUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UucHJvdG90eXBlLnRyeVJlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICB0aGlzLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5fcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlID0gdGhpcy5fcmVqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQcm9taXNlUmVzb2x1dGlvblNvdXJjZTtcclxufSgpKTtcclxuZXhwb3J0cy5Qcm9taXNlUmVzb2x1dGlvblNvdXJjZSA9IFByb21pc2VSZXNvbHV0aW9uU291cmNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlUmVzb2x1dGlvblNvdXJjZS5qcy5tYXAiLCJpbXBvcnQge1xyXG4gICAgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UsIGRlbGF5LCBJQ2FuY2VsbGF0aW9uVG9rZW4sIElSZXF1ZXN0UGFyYW1zLFxyXG4gICAgUHJvbWlzZUNhbmNlbGxlZEVycm9yLCBzZW5kUmVxdWVzdCwgeWllbGRlZFxyXG59IGZyb20gXCJ0YXNrbGlrZS1wcm9taXNlLWxpYnJhcnlcIjtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWR1cGxpY2F0ZS1pbXBvcnRzXHJcbmltcG9ydCAqIGFzIHRwbEFtYmllbnQgZnJvbSBcInRhc2tsaWtlLXByb21pc2UtbGlicmFyeVwiO1xyXG5cclxuZnVuY3Rpb24gJDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KHNlbGVjdG9yOiBzdHJpbmcsIHNjb3BlPzogSFRNTEVsZW1lbnQpOiBUIHwgbnVsbCB7XHJcbiAgICBpZiAoc2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gc2NvcGUucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgYXMgVDtcclxuICAgIH1cclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSBhcyBUO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkxvYWQoKSB7XHJcbiAgICAkKFwiI3RwbC15aWVsZGVkLXJ1blwiKSEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHJ1bkRlbW8oZGVtb1lpZWxkLCBcIiN0cGwteWllbGRlZC1wYW5lbFwiKSk7XHJcbiAgICAkKFwiI3RwbC1kZWxheS1ydW5cIikhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBydW5EZW1vKGRlbW9EZWxheSwgXCIjdHBsLWRlbGF5LXBhbmVsXCIsIFwiI3RwbC1kZWxheS1jYW5jZWxcIikpO1xyXG4gICAgJChcIiN0cGwtc2VuZHJlcXVlc3QtcnVuXCIpIS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcnVuRGVtbyhkZW1vSHR0cCwgXCIjdHBsLXNlbmRyZXF1ZXN0LXBhbmVsXCIsIFwiI3RwbC1zZW5kcmVxdWVzdC1jYW5jZWxcIikpO1xyXG4gICAgLy8gRXhwb3NlIFRQTCBsaWJyYXJ5IHRvIHRoZSBkZWJ1Z2dlciBjb25zb2xlLlxyXG4gICAgKHdpbmRvdyBhcyB1bmtub3duIGFzIHsgVFBMOiB0eXBlb2YgdHBsQW1iaWVudCB9KS5UUEwgPSB0cGxBbWJpZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZEVycm9yUGFuZWwoZXJyb3I6IHVua25vd24pIHtcclxuICAgIGNvbnN0IGVyckJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBlcnJCb3guY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG4gICAgZXJyQm94LmlubmVyVGV4dCA9IGVycm9yICYmIChlcnJvciBhcyB7IHN0YWNrPzogc3RyaW5nIH0pLnN0YWNrIHx8IFN0cmluZyhlcnJvcik7XHJcbiAgICByZXR1cm4gZXJyQm94O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBlbmRMaW5lKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNvbnRlbnQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgbGluZS5pbm5lclRleHQgPSBjb250ZW50O1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxpbmUpO1xyXG4gICAgcmV0dXJuIGxpbmU7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJ1bkRlbW8oXHJcbiAgICBkZW1vRnVuYzogKHBhbmVsOiBIVE1MRWxlbWVudCwgY2FuY2VsbGF0aW9uVG9rZW4/OiBJQ2FuY2VsbGF0aW9uVG9rZW4pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LFxyXG4gICAgcGFuZWxTZWxlY3Rvcjogc3RyaW5nLFxyXG4gICAgY2FuY2VsbGF0aW9uQnV0dG9uU2VsZWN0b3I/OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGN0cyA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xyXG4gICAgY29uc3Qgb25DYW5jZWwgPSAoKSA9PiB7IGN0cy5jYW5jZWwoKTsgfTtcclxuICAgIGNvbnN0IHBhbmVsID0gJChwYW5lbFNlbGVjdG9yKSE7XHJcbiAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBjYW5jZWxsYXRpb25CdXR0b25TZWxlY3RvciA/ICQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KGNhbmNlbGxhdGlvbkJ1dHRvblNlbGVjdG9yKSA6IG51bGw7XHJcbiAgICBpZiAoY2FuY2VsQnV0dG9uKSB7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkNhbmNlbCk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwYW5lbC5pbm5lclRleHQgPSBcIlwiO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBkZW1vRnVuYyhwYW5lbCwgY2FuY2VsQnV0dG9uID8gY3RzLnRva2VuIDogdW5kZWZpbmVkKTtcclxuICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChidWlsZEVycm9yUGFuZWwoZXJyb3IpKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgaWYgKGNhbmNlbEJ1dHRvbikge1xyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQ2FuY2VsKTtcclxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbW9ZaWVsZChwYW5lbDogSFRNTEVsZW1lbnQpIHtcclxuICAgIGFzeW5jIGZ1bmN0aW9uIG15QXN5bmNGdW5jdGlvbigpIHtcclxuICAgICAgICBhcHBlbmRMaW5lKHBhbmVsLCBcIkNhbGxlZTogRG8gc29tZSB3b3JrIHN5bmNocm9ub3VzbHkgaW4gbXlBc3luY0Z1bmN0aW9u4oCmXCIpO1xyXG4gICAgICAgIGFwcGVuZExpbmUocGFuZWwsIFwiQ2FsbGVlOiBteUFzeW5jRnVuY3Rpb24gaXMgdG8geWllbGTigKZcIik7XHJcbiAgICAgICAgYXdhaXQgeWllbGRlZCgpO1xyXG4gICAgICAgIGFwcGVuZExpbmUocGFuZWwsIFwiQ2FsbGVlOiBiYWNrIGZyb20geWllbGRlZCBzdGF0ZeKAplwiKTtcclxuICAgICAgICBhcHBlbmRMaW5lKHBhbmVsLCBcIkNhbGxlZTogZXhpdGluZy5cIik7XHJcbiAgICB9XHJcbiAgICBhcHBlbmRMaW5lKHBhbmVsLCBcIkNhbGxlcjogQ2FsbCBteUFzeW5jRnVuY3Rpb24uXCIpO1xyXG4gICAgbXlBc3luY0Z1bmN0aW9uKCk7XHJcbiAgICBhcHBlbmRMaW5lKHBhbmVsLCBcIkNhbGxlcjogV2UgZGVjaWRlIGRvbid0IGF3YWl0IGZvciBteUFzeW5jRnVuY3Rpb24uXCIpO1xyXG4gICAgYXBwZW5kTGluZShwYW5lbCwgXCJDYWxsZXI6IGV4aXRpbmcuXCIpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkZW1vRGVsYXkocGFuZWw6IEhUTUxFbGVtZW50LCBjdD86IElDYW5jZWxsYXRpb25Ub2tlbikge1xyXG4gICAgbGV0IGxhc3RMaW5lID0gYXBwZW5kTGluZShwYW5lbCwgXCJEZWxheSAwbXMgKFNldFRpbWVvdXQoMCkgKyB5aWVsZGVkKS5cIik7XHJcbiAgICBhd2FpdCBkZWxheSgwLCBjdCk7XHJcbiAgICBsYXN0TGluZS5pbm5lclRleHQgKz0gXCIgRmluaXNoZWQuXCI7XHJcbiAgICBsYXN0TGluZSA9IGFwcGVuZExpbmUocGFuZWwsIFwiRGVsYXkgNTAwbXMuXCIpO1xyXG4gICAgYXdhaXQgZGVsYXkoNTAwLCBjdCk7XHJcbiAgICBsYXN0TGluZS5pbm5lclRleHQgKz0gXCIgRmluaXNoZWQuXCI7XHJcbiAgICBsYXN0TGluZSA9IGFwcGVuZExpbmUocGFuZWwsIFwiRGVsYXkgMXMuXCIpO1xyXG4gICAgYXdhaXQgZGVsYXkoMTAwMCwgY3QpO1xyXG4gICAgbGFzdExpbmUuaW5uZXJUZXh0ICs9IFwiIEZpbmlzaGVkLlwiO1xyXG4gICAgbGFzdExpbmUgPSBhcHBlbmRMaW5lKHBhbmVsLCBcIkRlbGF5IDJzLlwiKTtcclxuICAgIGF3YWl0IGRlbGF5KDIwMDAsIGN0KTtcclxuICAgIGxhc3RMaW5lLmlubmVyVGV4dCArPSBcIiBGaW5pc2hlZC5cIjtcclxuICAgIGxhc3RMaW5lID0gYXBwZW5kTGluZShwYW5lbCwgXCJEZWxheSAzcy5cIik7XHJcbiAgICBhd2FpdCBkZWxheSgzMDAwLCBjdCk7XHJcbiAgICBsYXN0TGluZS5pbm5lclRleHQgKz0gXCIgRmluaXNoZWQuXCI7XHJcbiAgICBhcHBlbmRMaW5lKHBhbmVsLCBcIi0tLS0tLS0tLS1cIik7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbW9IdHRwKHBhbmVsOiBIVE1MRWxlbWVudCwgY3Q/OiBJQ2FuY2VsbGF0aW9uVG9rZW4pIHtcclxuICAgIGFzeW5jIGZ1bmN0aW9uIHNlbmRBbmRSZXBvcnQocmVxdWVzdDogSVJlcXVlc3RQYXJhbXMpIHtcclxuICAgICAgICBsZXQgbGFzdExpbmUgPSBhcHBlbmRMaW5lKHBhbmVsLCBgJHtyZXF1ZXN0Lm1ldGhvZH0gcmVxdWVzdCB0byAke3JlcXVlc3QudXJsfeKApmApO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZFJlcXVlc3QocmVxdWVzdCwgY3QpO1xyXG4gICAgICAgICAgICBsYXN0TGluZS5pbm5lclRleHQgKz0gXCIgXCIgKyByZXNwb25zZS5zdGF0dXNDb2RlICsgXCIgXCIgKyByZXNwb25zZS5zdGF0dXNUZXh0O1xyXG4gICAgICAgICAgICBhcHBlbmRMaW5lKHBhbmVsLCBcIkNvbnRlbnQtVHlwZTogXCIgKyByZXNwb25zZS54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO1xyXG4gICAgICAgICAgICBjb25zdCBib2R5Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcclxuICAgICAgICAgICAgYm9keUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaHR0cC1yZXNwb25zZS1ib2R5XCIpO1xyXG4gICAgICAgICAgICBib2R5Q29udGFpbmVyLmlubmVyVGV4dCA9IHJlc3BvbnNlLnhoci5yZXNwb25zZVRleHQ7XHJcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGJvZHlDb250YWluZXIpO1xyXG4gICAgICAgICAgICBsYXN0TGluZSA9IGFwcGVuZExpbmUocGFuZWwsIFwiZW5zdXJlU3VjY2Vzc2Z1bFN0YXR1c0NvZGXigKZcIik7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmVuc3VyZVN1Y2Nlc3NmdWxTdGF0dXNDb2RlKCk7XHJcbiAgICAgICAgICAgIGxhc3RMaW5lLmlubmVyVGV4dCArPSBcIiBTdWNjZXNzZnVsLlwiO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByb21pc2VDYW5jZWxsZWRFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoY3QgJiYgY3QuaXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgY3QgaXMgY2FuY2VsbGVkLCB3ZSB3b24ndCBjb250aW51ZSB0aGUgZGVtb1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoYnVpbGRFcnJvclBhbmVsKGVycm9yKSk7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgYXBwZW5kTGluZShwYW5lbCwgXCItLS0tLS0tLS0tXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGF3YWl0IHNlbmRBbmRSZXBvcnQoeyB1cmw6IFwidHNjb25maWcuanNvbj9yYW5kPVwiICsgTWF0aC5yYW5kb20oKSwgbWV0aG9kOiBcIkdFVFwiLCB0aW1lb3V0OiAyMDAwIH0pO1xyXG4gICAgYXdhaXQgc2VuZEFuZFJlcG9ydCh7IHVybDogXCJ0c2NvbmZpZy5qc29uXCIsIG1ldGhvZDogXCJQT1NUXCIgfSk7XHJcbn1cclxuXHJcbm9uTG9hZCgpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9