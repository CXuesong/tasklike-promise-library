!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.ts")}({"../packages/tasklike-promise-library/dist/cancellation.js":
/*!*****************************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/cancellation.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,null==n?"Promise execution has been cancelled.":n)||this;return r.name="PromiseCancelledError",Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.PromiseCancelledError=o;var s=function(){function e(){}return Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return!!this._cancellationPromise&&!this._notifyCancel},enumerable:!0,configurable:!0}),e.prototype._ensurePromiseInitialized=function(){var e=this;this._cancellationPromise||(this._cancellationPromise=new Promise(function(t,n){e._notifyCancel=t}))},e.prototype.__int_cancel=function(){this._ensurePromiseInitialized(),this._notifyCancel&&(this._notifyCancel(),this._notifyCancel=void 0)},e.prototype.throwIfCancellationRequested=function(){if(this._cancellationPromise&&!this._notifyCancel)throw new o},e.prototype.subscribe=function(e){this._ensurePromiseInitialized(),this._cancellationPromise.then(e)},Object.defineProperty(e.prototype,"promise",{get:function(){return this._ensurePromiseInitialized(),this._cancellationPromise},enumerable:!0,configurable:!0}),e}(),a=new s;a.__int_cancel();var c=function(){function e(e){null!=e&&this.cancelAfter(e)}return Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return!!this._cancellationToken&&this._cancellationToken.isCancellationRequested},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this._cancellationToken?this._cancellationToken.__int_cancel():this._cancellationToken=a},e.prototype.cancelAfter=function(e){var t=this;if(e<0)throw new RangeError("delay (arg#1) should be a non-negative number.");0===e?this.cancel():setTimeout(function(){t.cancel()},e)},Object.defineProperty(e.prototype,"token",{get:function(){return this._cancellationToken||(this._cancellationToken=new s),this._cancellationToken},enumerable:!0,configurable:!0}),e.race=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=new e,i=function(){r.cancel()},o=0,s=t;o<s.length;o++){var a=s[o];a&&a.subscribe(i)}return r},e}();t.CancellationTokenSource=c},"../packages/tasklike-promise-library/dist/common.js":
/*!***********************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/common.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! ./cancellation */"../packages/tasklike-promise-library/dist/cancellation.js"),i=n(/*! ./promiseResolutionSource */"../packages/tasklike-promise-library/dist/promiseResolutionSource.js"),o=Promise.resolve();t.delay=function(e,t){if(e<0)throw new RangeError("milliseconds (arg#1) should be a non-negative number.");t&&t.throwIfCancellationRequested();var n=new i.PromiseResolutionSource,o=setTimeout(function(){n.tryResolve()},e);return t&&t.subscribe(function(){clearTimeout(o),n.tryReject(new r.PromiseCancelledError)}),n.promise},t.yielded=function(){return o},t.fromResolved=function(e){return Promise.resolve(e)},t.fromRejected=function(e){return Promise.reject(e)},t.fromCancelled=function(){return Promise.reject(new r.PromiseCancelledError)}},"../packages/tasklike-promise-library/dist/http.js":
/*!*********************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/http.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(/*! ./cancellation */"../packages/tasklike-promise-library/dist/cancellation.js"),s=n(/*! ./promiseResolutionSource */"../packages/tasklike-promise-library/dist/promiseResolutionSource.js"),a=function(e){function t(n){var r=e.call(this,null==n?"The HTTP request has failed.":n)||this;return r.name="HttpRequestError",Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.HttpRequestError=a;var c=function(){function e(e){this.xhr=e,this.statusCode=this.xhr.status,this.statusText=this.xhr.statusText,this.isSuccessfulStatusCode=this.xhr.status>=200&&this.xhr.status<=299,console.assert(e)}return e.prototype.ensureSuccessfulStatusCode=function(){if(!this.isSuccessfulStatusCode)throw new a("The HTTP response code "+this.statusCode+" indicates failure.")},e}();t.sendRequest=function(e,t){t&&t.throwIfCancellationRequested();var n=new XMLHttpRequest,r=new s.PromiseResolutionSource;if(null!=e.username||null!=e.password?n.open(e.method,e.url,!0,e.username,e.password):n.open(e.method,e.url),e.timeout&&(n.timeout=e.timeout),e.headers)for(var i in e.headers)Object.prototype.hasOwnProperty.call(e.headers,i)&&n.setRequestHeader(i,e.headers[i]);return null!=e.responseType&&(n.responseType=e.responseType),null!=e.withCredentials&&(n.withCredentials=e.withCredentials),n.onload=function(){console.assert(4==n.readyState),r.tryResolve(new c(n))},n.onerror=function(){r.tryReject(new a("An error occurred while sending the HTTP request."))},n.ontimeout=function(){r.tryReject(new o.PromiseCancelledError("HTTP request timeout has reached."))},t&&t.subscribe(function(){r.tryCancel()&&n.abort()}),n.send(e.body),r.promise}},"../packages/tasklike-promise-library/dist/index.js":
/*!**********************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/index.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(/*! ./common */"../packages/tasklike-promise-library/dist/common.js")),r(n(/*! ./cancellation */"../packages/tasklike-promise-library/dist/cancellation.js")),r(n(/*! ./http */"../packages/tasklike-promise-library/dist/http.js")),r(n(/*! ./promiseResolutionSource */"../packages/tasklike-promise-library/dist/promiseResolutionSource.js"))},"../packages/tasklike-promise-library/dist/promiseResolutionSource.js":
/*!****************************************************************************!*\
  !*** ../packages/tasklike-promise-library/dist/promiseResolutionSource.js ***!
  \****************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! ./cancellation */"../packages/tasklike-promise-library/dist/cancellation.js"),i=function(){function e(){}return e.prototype._ensurePromiseInitialized=function(){var e=this;null==this._promise&&(this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n}))},Object.defineProperty(e.prototype,"promise",{get:function(){return this._ensurePromiseInitialized(),this._promise},enumerable:!0,configurable:!0}),e.prototype.tryResolve=function(e){return this._ensurePromiseInitialized(),!!this._resolve&&(this._resolve(e),this._resolve=this._reject=void 0,!0)},e.prototype.tryCancel=function(){return this._ensurePromiseInitialized(),!!this._reject&&(this._reject(new r.PromiseCancelledError),this._resolve=this._reject=void 0,!0)},e.prototype.tryReject=function(e){return this._ensurePromiseInitialized(),!!this._reject&&(this._reject(e),this._resolve=this._reject=void 0,!0)},e}();t.PromiseResolutionSource=i},"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=n(/*! tasklike-promise-library */"../packages/tasklike-promise-library/dist/index.js"),a=o(n(/*! tasklike-promise-library */"../packages/tasklike-promise-library/dist/index.js"));function c(e,t){return t?t.querySelector(e):document.querySelector(e)}function l(e){var t=document.createElement("div");return t.classList.add("error"),t.innerText=e&&e.stack||String(e),t}function u(e,t){var n=document.createElement("div");return n.innerText=t,e.appendChild(n),n}function d(e,t,n){return r(this,void 0,void 0,function(){var r,o,a,u,d,f;return i(this,function(i){switch(i.label){case 0:r=new s.CancellationTokenSource,o=function(){r.cancel()},a=c(t),(u=n?c(n):null)&&(u.addEventListener("click",o),u.disabled=!1),a.innerText="",i.label=1;case 1:return i.trys.push([1,4,5,6]),(d=e(a,u?r.token:void 0))?[4,d]:[3,3];case 2:i.sent(),i.label=3;case 3:return[3,6];case 4:return f=i.sent(),a.appendChild(l(f)),[3,6];case 5:return u&&(u.removeEventListener("click",o),u.disabled=!0),[7];case 6:return[2]}})})}function f(e){u(e,"Caller: Call myAsyncFunction."),function(){r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return u(e,"Callee: Do some work synchronously in myAsyncFunction…"),u(e,"Callee: myAsyncFunction is to yield…"),[4,s.yielded()];case 1:return t.sent(),u(e,"Callee: back from yielded state…"),u(e,"Callee: exiting."),[2]}})})}(),u(e,"Caller: We decide don't await for myAsyncFunction."),u(e,"Caller: exiting.")}function p(e,t){return r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return n=u(e,"Delay 0ms (SetTimeout(0) + yielded)."),[4,s.delay(0,t)];case 1:return r.sent(),n.innerText+=" Finished.",n=u(e,"Delay 500ms."),[4,s.delay(500,t)];case 2:return r.sent(),n.innerText+=" Finished.",n=u(e,"Delay 1s."),[4,s.delay(1e3,t)];case 3:return r.sent(),n.innerText+=" Finished.",n=u(e,"Delay 2s."),[4,s.delay(2e3,t)];case 4:return r.sent(),n.innerText+=" Finished.",n=u(e,"Delay 3s."),[4,s.delay(3e3,t)];case 5:return r.sent(),n.innerText+=" Finished.",u(e,"----------"),[2]}})})}function h(e,t){return r(this,void 0,void 0,function(){function n(n){return r(this,void 0,void 0,function(){var r,o,a,c;return i(this,function(i){switch(i.label){case 0:r=u(e,n.method+" request to "+n.url+"…"),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,s.sendRequest(n,t)];case 2:return o=i.sent(),r.innerText+=" "+o.statusCode+" "+o.statusText,u(e,"Content-Type: "+o.xhr.getResponseHeader("Content-Type")),(a=document.createElement("pre")).classList.add("http-response-body"),a.innerText=o.xhr.responseText,e.appendChild(a),r=u(e,"ensureSuccessfulStatusCode…"),o.ensureSuccessfulStatusCode(),r.innerText+=" Successful.",[3,5];case 3:if((c=i.sent())instanceof s.PromiseCancelledError)throw console.assert(t&&t.isCancellationRequested),c;return e.appendChild(l(c)),[3,5];case 4:return u(e,"----------"),[7];case 5:return[2]}})})}return i(this,function(e){switch(e.label){case 0:return[4,n({url:"/tsconfig.json",method:"GET",timeout:2e3})];case 1:return e.sent(),[4,n({url:"/tsconfig.json",method:"POST"})];case 2:return e.sent(),[2]}})})}c("#tpl-yielded-run").addEventListener("click",function(){return d(f,"#tpl-yielded-panel")}),c("#tpl-delay-run").addEventListener("click",function(){return d(p,"#tpl-delay-panel","#tpl-delay-cancel")}),c("#tpl-sendrequest-run").addEventListener("click",function(){return d(h,"#tpl-sendrequest-panel","#tpl-sendrequest-cancel")}),window.TPL=a}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4uL3BhY2thZ2VzL3Rhc2tsaWtlLXByb21pc2UtbGlicmFyeS9kaXN0L2NhbmNlbGxhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi4vcGFja2FnZXMvdGFza2xpa2UtcHJvbWlzZS1saWJyYXJ5L2Rpc3QvY29tbW9uLmpzIiwid2VicGFjazovLy8uLi9wYWNrYWdlcy90YXNrbGlrZS1wcm9taXNlLWxpYnJhcnkvZGlzdC9odHRwLmpzIiwid2VicGFjazovLy8uLi9wYWNrYWdlcy90YXNrbGlrZS1wcm9taXNlLWxpYnJhcnkvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi4vcGFja2FnZXMvdGFza2xpa2UtcHJvbWlzZS1saWJyYXJ5L2Rpc3QvcHJvbWlzZVJlc29sdXRpb25Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsInRoaXMiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIl9fIiwiY29uc3RydWN0b3IiLCJQcm9taXNlQ2FuY2VsbGVkRXJyb3IiLCJfc3VwZXIiLCJtZXNzYWdlIiwiX3RoaXMiLCJFcnJvciIsIkNhbmNlbGxhdGlvblRva2VuIiwiX2NhbmNlbGxhdGlvblByb21pc2UiLCJfbm90aWZ5Q2FuY2VsIiwiY29uZmlndXJhYmxlIiwiX2Vuc3VyZVByb21pc2VJbml0aWFsaXplZCIsIlByb21pc2UiLCJyZXMiLCJyZWoiLCJfX2ludF9jYW5jZWwiLCJ1bmRlZmluZWQiLCJ0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJ0aGVuIiwiY2FuY2VsbGVkVG9rZW4iLCJDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSIsImNhbmNlbEFmdGVyRGVsYXkiLCJjYW5jZWxBZnRlciIsIl9jYW5jZWxsYXRpb25Ub2tlbiIsImlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIiwiY2FuY2VsIiwiZGVsYXkiLCJSYW5nZUVycm9yIiwic2V0VGltZW91dCIsInJhY2UiLCJjYW5jZWxsYXRpb25Ub2tlbnMiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImN0cyIsImNhbmNlbGxhdGlvbkNhbGxiYWNrIiwiX2EiLCJjYW5jZWxsYXRpb25Ub2tlbnNfMSIsInRva2VuIiwiY2FuY2VsbGF0aW9uXzEiLCJwcm9taXNlUmVzb2x1dGlvblNvdXJjZV8xIiwiX3lpZWxkZWRQcm9taXNlIiwicmVzb2x2ZSIsIm1pbGxpc2Vjb25kcyIsImNhbmNlbGxhdGlvblRva2VuIiwicHJzIiwiUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UiLCJpZCIsInRyeVJlc29sdmUiLCJjbGVhclRpbWVvdXQiLCJ0cnlSZWplY3QiLCJwcm9taXNlIiwieWllbGRlZCIsImZyb21SZXNvbHZlZCIsInJlc3VsdCIsImZyb21SZWplY3RlZCIsInJlYXNvbiIsInJlamVjdCIsImZyb21DYW5jZWxsZWQiLCJIdHRwUmVxdWVzdEVycm9yIiwiWGhyUmVzcG9uc2UiLCJ4aHIiLCJzdGF0dXNDb2RlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImlzU3VjY2Vzc2Z1bFN0YXR1c0NvZGUiLCJjb25zb2xlIiwiYXNzZXJ0IiwiZW5zdXJlU3VjY2Vzc2Z1bFN0YXR1c0NvZGUiLCJzZW5kUmVxdWVzdCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJvcGVuIiwibWV0aG9kIiwidXJsIiwidGltZW91dCIsImhlYWRlcnMiLCJuYW1lXzEiLCJzZXRSZXF1ZXN0SGVhZGVyIiwicmVzcG9uc2VUeXBlIiwid2l0aENyZWRlbnRpYWxzIiwib25sb2FkIiwicmVhZHlTdGF0ZSIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJ0cnlDYW5jZWwiLCJhYm9ydCIsInNlbmQiLCJib2R5IiwiX19leHBvcnQiLCJfcHJvbWlzZSIsIl9yZXNvbHZlIiwiX3JlamVjdCIsIiQiLCJzZWxlY3RvciIsInNjb3BlIiwicXVlcnlTZWxlY3RvciIsImRvY3VtZW50IiwiYnVpbGRFcnJvclBhbmVsIiwiZXJyb3IiLCJlcnJCb3giLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJUZXh0Iiwic3RhY2siLCJTdHJpbmciLCJhcHBlbmRMaW5lIiwiY29udGFpbmVyIiwiY29udGVudCIsImxpbmUiLCJhcHBlbmRDaGlsZCIsInJ1bkRlbW8iLCJkZW1vRnVuYyIsInBhbmVsU2VsZWN0b3IiLCJjYW5jZWxsYXRpb25CdXR0b25TZWxlY3RvciIsIm9uQ2FuY2VsIiwicGFuZWwiLCJjYW5jZWxCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzYWJsZWQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGVtb1lpZWxkIiwibXlBc3luY0Z1bmN0aW9uIiwiZGVtb0RlbGF5IiwiY3QiLCJsYXN0TGluZSIsImRlbW9IdHRwIiwic2VuZEFuZFJlcG9ydCIsInJlc3BvbnNlIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJib2R5Q29udGFpbmVyIiwicmVzcG9uc2VUZXh0Iiwid2luZG93IiwiVFBMIiwidHBsQW1iaWVudCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JD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LFdBQU0sT0FBQVAsRUFBUVksRUFBVyxtQkFBb0IsdUJBQzVGL0IsRUFBRSx3QkFBeUIwQixpQkFBaUIsUUFBUyxXQUFNLE9BQUFQLEVBQVFlLEVBQVUseUJBQTBCLDZCQUV0R00sT0FBaURDLElBQU1DIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvaW5kZXgudHNcIik7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuLy8gSW1wb3J0IGFzIGZldyAuL3NyYyBtb2R1bGVzIGFzIHBvc3NpYmxlLlxyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vKipcclxuICogQW4gZXJyb3IgdGhhdCByYWlzZXMgd2hlbiB0aGUgY3VycmVudCBwcm9taXNlIGhhcyBiZWVuIHJlamVjdGVkIGR1ZSB0byBjYW5jZWxsYXRpb24uXHJcbiAqXHJcbiAqIEVTNiBgUHJvbWlzZWAgZG9lcyBub3QgaGF2ZSBjYW5jZWxsYXRpb24gc3VwcG9ydCxcclxuICogc28gVFBMIHVzZXMgYHJlamVjdGAgd2l0aCBgUHJvbWlzZUNhbmNlbGxlZEVycm9yYCB0byBpbmRpY2F0ZSBhIGNhbmNlbGxlZCBgUHJvbWlzZWAuXHJcbiAqL1xyXG52YXIgUHJvbWlzZUNhbmNlbGxlZEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFByb21pc2VDYW5jZWxsZWRFcnJvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFByb21pc2VDYW5jZWxsZWRFcnJvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSA9PSBudWxsID8gXCJQcm9taXNlIGV4ZWN1dGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQuXCIgOiBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBcIlByb21pc2VDYW5jZWxsZWRFcnJvclwiO1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgUHJvbWlzZUNhbmNlbGxlZEVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2VDYW5jZWxsZWRFcnJvcjtcclxufShFcnJvcikpO1xyXG5leHBvcnRzLlByb21pc2VDYW5jZWxsZWRFcnJvciA9IFByb21pc2VDYW5jZWxsZWRFcnJvcjtcclxudmFyIENhbmNlbGxhdGlvblRva2VuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ2FuY2VsbGF0aW9uVG9rZW4oKSB7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FuY2VsbGF0aW9uVG9rZW4ucHJvdG90eXBlLCBcImlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5fY2FuY2VsbGF0aW9uUHJvbWlzZSAmJiAhdGhpcy5fbm90aWZ5Q2FuY2VsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ2FuY2VsbGF0aW9uVG9rZW4ucHJvdG90eXBlLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMuX2NhbmNlbGxhdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikgeyBfdGhpcy5fbm90aWZ5Q2FuY2VsID0gcmVzOyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FuY2VsbGF0aW9uVG9rZW4ucHJvdG90eXBlLl9faW50X2NhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5fbm90aWZ5Q2FuY2VsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeUNhbmNlbCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9ub3RpZnlDYW5jZWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhbmNlbGxhdGlvblRva2VuLnByb3RvdHlwZS50aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW5jZWxsYXRpb25Qcm9taXNlICYmICF0aGlzLl9ub3RpZnlDYW5jZWwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFByb21pc2VDYW5jZWxsZWRFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBUT0RPIHJldHVybiBzb21lIHNvcnQgb2YgSURpc3Bvc2FibGUuXHJcbiAgICBDYW5jZWxsYXRpb25Ub2tlbi5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fZW5zdXJlUHJvbWlzZUluaXRpYWxpemVkKCk7XHJcbiAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUHJvbWlzZS50aGVuKGNhbGxiYWNrKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FuY2VsbGF0aW9uVG9rZW4ucHJvdG90eXBlLCBcInByb21pc2VcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbGxhdGlvblByb21pc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQ2FuY2VsbGF0aW9uVG9rZW47XHJcbn0oKSk7XHJcbnZhciBjYW5jZWxsZWRUb2tlbiA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlbigpO1xyXG5jYW5jZWxsZWRUb2tlbi5fX2ludF9jYW5jZWwoKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gb3duZXIgb2YgYENhbmNlbGxhdGlvblRva2VuYCB0aGF0IGNhbiBpbml0aWF0ZXMgdGhlIGNhbmNlbGxhdGlvbi5cclxuICovXHJcbnZhciBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNhbmNlbEFmdGVyRGVsYXkgQXV0b21hdGljYWxseSByZXF1ZXN0cyBjYW5jZWxsYXRpb24gYWZ0ZXIgdGhlIHNwZWNpZmllZCBub24tbmVnYXRpdmUgdGltZSBpbiBtaWxsaXNlY29uZHMuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIENhbmNlbGxhdGlvblRva2VuU291cmNlKGNhbmNlbEFmdGVyRGVsYXkpIHtcclxuICAgICAgICBpZiAoY2FuY2VsQWZ0ZXJEZWxheSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQWZ0ZXIoY2FuY2VsQWZ0ZXJEZWxheSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhbmNlbGxhdGlvblRva2VuU291cmNlLnByb3RvdHlwZSwgXCJpc0NhbmNlbGxhdGlvblJlcXVlc3RlZFwiLCB7XHJcbiAgICAgICAgLyoqIFdoZXRoZXIgdGhlIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuX2NhbmNlbGxhdGlvblRva2VuICYmIHRoaXMuX2NhbmNlbGxhdGlvblRva2VuLmlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWF0ZXMgY2FuY2VsbGF0aW9uIGlmIGl0IGhhcyBub3QgYmVlbiByZXF1ZXN0ZWQgeWV0LlxyXG4gICAgICogTm90aWZpZXMgdGhlIGRlcml2ZWQgYElDYW5jZWxsYXRpb25Ub2tlbmAgb2YgdGhlIGNhbmNlbGxhdGlvbi5cclxuICAgICAqL1xyXG4gICAgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fY2FuY2VsbGF0aW9uVG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uVG9rZW4uX19pbnRfY2FuY2VsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jYW5jZWxsYXRpb25Ub2tlbiA9IGNhbmNlbGxlZFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYXRlcyBjYW5jZWxsYXRpb24gYWZ0ZXIgdGhlIHNwZWNpZmllZCBkZWxheS5cclxuICAgICAqIEBwYXJhbSBkZWxheSB0aGUgbm9uLW5lZ2F0aXZlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGluaXRpYXRpbmcgdGhlIGNhbmNlbGxhdGlvbi5cclxuICAgICAqL1xyXG4gICAgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UucHJvdG90eXBlLmNhbmNlbEFmdGVyID0gZnVuY3Rpb24gKGRlbGF5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoZGVsYXkgPCAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiZGVsYXkgKGFyZyMxKSBzaG91bGQgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlbGF5ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgX3RoaXMuY2FuY2VsKCk7IH0sIGRlbGF5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhbmNlbGxhdGlvblRva2VuU291cmNlLnByb3RvdHlwZSwgXCJ0b2tlblwiLCB7XHJcbiAgICAgICAgLyoqIEdldHMgdGhlIGRlcml2ZWQgYElDYW5jZWxsYXRpb25Ub2tlbmAgZnJvbSB0aGlzIHRva2VuIHNvdXJjZS4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9jYW5jZWxsYXRpb25Ub2tlbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uVG9rZW4gPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VsbGF0aW9uVG9rZW47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYSBgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2VgIHRoYXQgZ2V0cyBjYW5jZWxsZWQgd2hlbiBhbnkgb2YgdGhlIHNwZWNpZmllZCBgSUNhbmNlbGxhdGlvblRva2VuYCBnZXRzIGNhbmNlbGxlZC5cclxuICAgICAqIEBwYXJhbSBjYW5jZWxsYXRpb25Ub2tlbnMgT25lIG9yIG1vcmUgdW5kZXJseWluZyBgSUNhbmNlbGxhdGlvblRva2VuYC5cclxuICAgICAqL1xyXG4gICAgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UucmFjZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2FuY2VsbGF0aW9uVG9rZW5zID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW5zW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdHMgPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKTtcclxuICAgICAgICB2YXIgY2FuY2VsbGF0aW9uQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IGN0cy5jYW5jZWwoKTsgfTtcclxuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGNhbmNlbGxhdGlvblRva2Vuc18xID0gY2FuY2VsbGF0aW9uVG9rZW5zOyBfYSA8IGNhbmNlbGxhdGlvblRva2Vuc18xLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW4gPSBjYW5jZWxsYXRpb25Ub2tlbnNfMVtfYV07XHJcbiAgICAgICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgdG9rZW4uc3Vic2NyaWJlKGNhbmNlbGxhdGlvbkNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3RzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZTtcclxufSgpKTtcclxuZXhwb3J0cy5DYW5jZWxsYXRpb25Ub2tlblNvdXJjZSA9IENhbmNlbGxhdGlvblRva2VuU291cmNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW5jZWxsYXRpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNhbmNlbGxhdGlvbl8xID0gcmVxdWlyZShcIi4vY2FuY2VsbGF0aW9uXCIpO1xyXG52YXIgcHJvbWlzZVJlc29sdXRpb25Tb3VyY2VfMSA9IHJlcXVpcmUoXCIuL3Byb21pc2VSZXNvbHV0aW9uU291cmNlXCIpO1xyXG52YXIgX3lpZWxkZWRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbi8qKlxyXG4gKiBHZXRzIGEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIHNwZWNpZmllZCB0aW1lIG9mIGRlbGF5LlxyXG4gKiBAcGFyYW0gbWlsbGlzZWNvbmRzIG5vbi1uZWdhdGl2ZSB0aW1lIGluIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSB0aGUgcmV0dXJuZWQgYFByb21pc2VgIHJlc29sdmVzLlxyXG4gKiBAcGFyYW0gY2FuY2VsbGF0aW9uVG9rZW4gYSB0b2tlbiB1c2VkIHRvIGNhbmNlbCB0aGUgcmV0dXJuZWQgYFByb21pc2VgLlxyXG4gKiBAc2VlIHlpZWxkZWRcclxuICovXHJcbmZ1bmN0aW9uIGRlbGF5KG1pbGxpc2Vjb25kcywgY2FuY2VsbGF0aW9uVG9rZW4pIHtcclxuICAgIGlmIChtaWxsaXNlY29uZHMgPCAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJtaWxsaXNlY29uZHMgKGFyZyMxKSBzaG91bGQgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLlwiKTtcclxuICAgIH1cclxuICAgIGNhbmNlbGxhdGlvblRva2VuICYmIGNhbmNlbGxhdGlvblRva2VuLnRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoKTtcclxuICAgIHZhciBwcnMgPSBuZXcgcHJvbWlzZVJlc29sdXRpb25Tb3VyY2VfMS5Qcm9taXNlUmVzb2x1dGlvblNvdXJjZSgpO1xyXG4gICAgLy8gVE9ETyBtYWtlIHNldFRpbWVvdXQgaW5qZWN0YWJsZS5cclxuICAgIHZhciBpZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBwcnMudHJ5UmVzb2x2ZSgpOyB9LCBtaWxsaXNlY29uZHMpO1xyXG4gICAgaWYgKGNhbmNlbGxhdGlvblRva2VuKSB7XHJcbiAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW4uc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcclxuICAgICAgICAgICAgcHJzLnRyeVJlamVjdChuZXcgY2FuY2VsbGF0aW9uXzEuUHJvbWlzZUNhbmNlbGxlZEVycm9yKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBycy5wcm9taXNlO1xyXG59XHJcbmV4cG9ydHMuZGVsYXkgPSBkZWxheTtcclxuLyoqXHJcbiAqIFJldHVybnMgYSBgUHJvbWlzZUxpa2VgIGluc3RhbmNlIHRoYXQsIHdoZW4gdXNlZCB3aXRoIGBhd2FpdGAgZXhwcmVzc2lvbixcclxuICogYXN5bmNocm9ub3VzbHkgeWllbGRzIGJhY2sgdG8gdGhlIGNvZGUgYmVsb3cuIFRoZSBpbnN0YW5jZSByZXR1cm5lZCBiZWhhdmVzXHJcbiAqIGxpa2UgdGhlIHJldHVybmVkIHZhbHVlIG9mIGBQcm9taXNlLnJlc29sdmUoKWAuXHJcbiAqXHJcbiAqIE5vdGU6IFRoZSBtYWpvciBkaWZmZXJlbmNlIGJldHdlZW4gYHlpZWxkZWQoKWAgYW5kIGBkZWxheSgwKWAsIGlzIHRoYXQgYGRlbGF5YCB3aWxsXHJcbiAqIHJlc29sdmUgdGhlIHJldHVybmVkIGBQcm9taXNlYCBpbiBhIGBzZXRUaW1lb3V0YCBjYWxsYmFjaywgZXZlbiBpZiB0aGUgZGVsYXkgdGltZSBpcyBgMGAuXHJcbiAqIFRoaXMgd2lsbCBjYXVzZSBgUHJvbWlzZWAgcmV0dXJuZWQgYnkgYGRlbGF5YCBiZSAqcmVzb2x2ZWQqIGluIG1hcmNvVGFzayBxdWV1ZSBvbiBzb21lIGV4ZWN1dGlvbiBlbmdpbmUuXHJcbiAqXHJcbiAqIEBzZWUgZGVsYXlcclxuICovXHJcbmZ1bmN0aW9uIHlpZWxkZWQoKSB7XHJcbiAgICByZXR1cm4gX3lpZWxkZWRQcm9taXNlO1xyXG59XHJcbmV4cG9ydHMueWllbGRlZCA9IHlpZWxkZWQ7XHJcbi8qKlxyXG4gKiBHZXRzIGEgcmVzb2x2ZWQgYFByb21pc2VgLlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGJlaGF2ZXMgdGhlIHNhbWUgYXMgYFByb21pc2UucmVzb2x2ZWAuXHJcbiAqIEBwYXJhbSByZXN1bHQgdGhlIHJlc3VsdCBvZiB0aGUgcmVzb2x2ZWQgYFByb21pc2VgLlxyXG4gKi9cclxuZnVuY3Rpb24gZnJvbVJlc29sdmVkKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG59XHJcbmV4cG9ydHMuZnJvbVJlc29sdmVkID0gZnJvbVJlc29sdmVkO1xyXG4vKipcclxuICogR2V0cyBhIHJlamVjdGVkIGBQcm9taXNlYC5cclxuICogVGhpcyBmdW5jdGlvbiBiZWhhdmVzIHRoZSBzYW1lIGFzIGBQcm9taXNlLnJlamVjdGAuXHJcbiAqIEBwYXJhbSByZWFzb24gdGhlIHJlamVjdGlvbiByZWFzb24sIG9yIHRoZSBgRXJyb3JgIGNhdXNpbmcgdGhlIHJlamVjdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGZyb21SZWplY3RlZChyZWFzb24pIHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xyXG59XHJcbmV4cG9ydHMuZnJvbVJlamVjdGVkID0gZnJvbVJlamVjdGVkO1xyXG4vKipcclxuICogR2V0cyBhIGNhbmNlbGxlZCBgUHJvbWlzZWAuXHJcbiAqXHJcbiAqIEEgY2FuY2VsbGVkIGBQcm9taXNlYCBpcyBhIGBQcm9taXNlYCByZWplY3RlZCB3aXRoIGBQcm9taXNlQ2FuY2VsbGVkRXJyb3JgLlxyXG4gKi9cclxuZnVuY3Rpb24gZnJvbUNhbmNlbGxlZCgpIHtcclxuICAgIC8vIFdlIHdhbnQgdG8gY2FwdHVyZSB0aGUgc3RhY2sgdHJhY2UuXHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IGNhbmNlbGxhdGlvbl8xLlByb21pc2VDYW5jZWxsZWRFcnJvcigpKTtcclxufVxyXG5leHBvcnRzLmZyb21DYW5jZWxsZWQgPSBmcm9tQ2FuY2VsbGVkO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjYW5jZWxsYXRpb25fMSA9IHJlcXVpcmUoXCIuL2NhbmNlbGxhdGlvblwiKTtcclxudmFyIHByb21pc2VSZXNvbHV0aW9uU291cmNlXzEgPSByZXF1aXJlKFwiLi9wcm9taXNlUmVzb2x1dGlvblNvdXJjZVwiKTtcclxuLyoqXHJcbiAqIEFuIGVycm9yIHJhaXNlcyB3aGVuIGFuIEhUVFAgcmVxdWVzdCBmYWlscyBkdWUgdG8gbmV0d29yayB0cmFuc3BvcnRhdGlvblxyXG4gKiBvciBzZXJ2ZXIgcmVzcG9uc2UuXHJcbiAqL1xyXG52YXIgSHR0cFJlcXVlc3RFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhIdHRwUmVxdWVzdEVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSHR0cFJlcXVlc3RFcnJvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSA9PSBudWxsID8gXCJUaGUgSFRUUCByZXF1ZXN0IGhhcyBmYWlsZWQuXCIgOiBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBcIkh0dHBSZXF1ZXN0RXJyb3JcIjtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIEh0dHBSZXF1ZXN0RXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSHR0cFJlcXVlc3RFcnJvcjtcclxufShFcnJvcikpO1xyXG5leHBvcnRzLkh0dHBSZXF1ZXN0RXJyb3IgPSBIdHRwUmVxdWVzdEVycm9yO1xyXG52YXIgWGhyUmVzcG9uc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBYaHJSZXNwb25zZSh4aHIpIHtcclxuICAgICAgICB0aGlzLnhociA9IHhocjtcclxuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSB0aGlzLnhoci5zdGF0dXM7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNUZXh0ID0gdGhpcy54aHIuc3RhdHVzVGV4dDtcclxuICAgICAgICB0aGlzLmlzU3VjY2Vzc2Z1bFN0YXR1c0NvZGUgPSB0aGlzLnhoci5zdGF0dXMgPj0gMjAwICYmIHRoaXMueGhyLnN0YXR1cyA8PSAyOTk7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoeGhyKTtcclxuICAgIH1cclxuICAgIFhoclJlc3BvbnNlLnByb3RvdHlwZS5lbnN1cmVTdWNjZXNzZnVsU3RhdHVzQ29kZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNTdWNjZXNzZnVsU3RhdHVzQ29kZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSHR0cFJlcXVlc3RFcnJvcihcIlRoZSBIVFRQIHJlc3BvbnNlIGNvZGUgXCIgKyB0aGlzLnN0YXR1c0NvZGUgKyBcIiBpbmRpY2F0ZXMgZmFpbHVyZS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBYaHJSZXNwb25zZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIFNlbmQgYW4gSFRUUCByZXF1ZXN0IHdpdGggYFhNTEh0dHBSZXF1ZXN0YC5cclxuICogQHBhcmFtIHJlcXVlc3QgdGhlIHJlcXVlc3QgcGFyYW1ldGVycy5cclxuICogQHBhcmFtIGNhbmNlbGxhdGlvblRva2VuIGEgdG9rZW4gdXNlZCB0byBjYW5jZWwgdGhlIG9wZXJhdGlvbiBhbmQgYWJvcnQgdGhlIEhUVFAgcmVxdWVzdC5cclxuICovXHJcbmZ1bmN0aW9uIHNlbmRSZXF1ZXN0KHJlcXVlc3QsIGNhbmNlbGxhdGlvblRva2VuKSB7XHJcbiAgICBjYW5jZWxsYXRpb25Ub2tlbiAmJiBjYW5jZWxsYXRpb25Ub2tlbi50aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCk7XHJcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB2YXIgcHJzID0gbmV3IHByb21pc2VSZXNvbHV0aW9uU291cmNlXzEuUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UoKTtcclxuICAgIGlmIChyZXF1ZXN0LnVzZXJuYW1lICE9IG51bGwgfHwgcmVxdWVzdC5wYXNzd29yZCAhPSBudWxsKSB7XHJcbiAgICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlLCByZXF1ZXN0LnVzZXJuYW1lLCByZXF1ZXN0LnBhc3N3b3JkKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCk7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBJRSB0aGUgdGltZW91dCBwcm9wZXJ0eSBtYXkgb25seSBiZSBzZXQgYWZ0ZXIgY2FsbGluZyBvcGVuIGFuZCBiZWZvcmUgY2FsbGluZyBzZW5kLlxyXG4gICAgaWYgKHJlcXVlc3QudGltZW91dCkge1xyXG4gICAgICAgIHhoci50aW1lb3V0ID0gcmVxdWVzdC50aW1lb3V0O1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVlc3QuaGVhZGVycykge1xyXG4gICAgICAgIGZvciAodmFyIG5hbWVfMSBpbiByZXF1ZXN0LmhlYWRlcnMpIHtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXF1ZXN0LmhlYWRlcnMsIG5hbWVfMSkpIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWVfMSwgcmVxdWVzdC5oZWFkZXJzW25hbWVfMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVlc3QucmVzcG9uc2VUeXBlICE9IG51bGwpIHtcclxuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gcmVxdWVzdC5yZXNwb25zZVR5cGU7XHJcbiAgICB9XHJcbiAgICBpZiAocmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgIT0gbnVsbCkge1xyXG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSByZXF1ZXN0LndpdGhDcmVkZW50aWFscztcclxuICAgIH1cclxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoeGhyLnJlYWR5U3RhdGUgPT0gNCk7IC8vIERPTkVcclxuICAgICAgICBwcnMudHJ5UmVzb2x2ZShuZXcgWGhyUmVzcG9uc2UoeGhyKSk7XHJcbiAgICB9O1xyXG4gICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcHJzLnRyeVJlamVjdChuZXcgSHR0cFJlcXVlc3RFcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNlbmRpbmcgdGhlIEhUVFAgcmVxdWVzdC5cIikpO1xyXG4gICAgfTtcclxuICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcHJzLnRyeVJlamVjdChuZXcgY2FuY2VsbGF0aW9uXzEuUHJvbWlzZUNhbmNlbGxlZEVycm9yKFwiSFRUUCByZXF1ZXN0IHRpbWVvdXQgaGFzIHJlYWNoZWQuXCIpKTtcclxuICAgIH07XHJcbiAgICAvLyBUT0RPIFdlIG5lZWQgdW5zdWJzY3JpYmUgdGhpcyB3aGVuIFByb21pc2UgcmVzb2x2ZWQuXHJcbiAgICBjYW5jZWxsYXRpb25Ub2tlbiAmJiBjYW5jZWxsYXRpb25Ub2tlbi5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChwcnMudHJ5Q2FuY2VsKCkpIHtcclxuICAgICAgICAgICAgeGhyLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB4aHIuc2VuZChyZXF1ZXN0LmJvZHkpO1xyXG4gICAgcmV0dXJuIHBycy5wcm9taXNlO1xyXG59XHJcbmV4cG9ydHMuc2VuZFJlcXVlc3QgPSBzZW5kUmVxdWVzdDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHR0cC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vY29tbW9uXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vY2FuY2VsbGF0aW9uXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vaHR0cFwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3Byb21pc2VSZXNvbHV0aW9uU291cmNlXCIpKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNhbmNlbGxhdGlvbl8xID0gcmVxdWlyZShcIi4vY2FuY2VsbGF0aW9uXCIpO1xyXG4vKipcclxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyBhIGBQcm9taXNlYCBmcm9tIG91dHNpZGUgb2YgaXQuXHJcbiAqL1xyXG52YXIgUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQcm9taXNlUmVzb2x1dGlvblNvdXJjZSgpIHtcclxuICAgIH1cclxuICAgIFByb21pc2VSZXNvbHV0aW9uU291cmNlLnByb3RvdHlwZS5fZW5zdXJlUHJvbWlzZUluaXRpYWxpemVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Byb21pc2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVzb2x2ZSA9IHJlcztcclxuICAgICAgICAgICAgICAgIF90aGlzLl9yZWplY3QgPSByZWo7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJvbWlzZVJlc29sdXRpb25Tb3VyY2UucHJvdG90eXBlLCBcInByb21pc2VcIiwge1xyXG4gICAgICAgIC8qKiBHZXRzIHRoZSBkZXJpdmVkIGBQcm9taXNlYCBjb250cm9sbGVkIGJ5IHRoZSBjdXJyZW50IGluc3RhbmNlLiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFJlc29sdmVzIHRoZSBkZXJpdmVkIGBQcm9taXNlYCB3aXRoIHRoZSBzcGVjaWZpZWQgcmVzdWx0LlxyXG4gICAgICogQHBhcmFtIHJlc3VsdCB0aGUgcmVzb2x1dGlvbiByZXN1bHQsIG9yIGEgYFByb21pc2VMaWtlYCB0aGF0IGNhbiBiZSBmdXJ0aGVybHkgKnJlc29sdmVkKi5cclxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZGVyaXZlZCBgUHJvbWlzZWAgaGFzIGp1c3QgYmVlbiAqcmVzb2x2ZWQqO1xyXG4gICAgICogb3RoZXJ3aXNlIGl0IG1lYW5zIHRoZSBgUHJvbWlzZWAgaGFzIGFscmVhZHkgYmVlbiAqc2V0dGxlZCogYmVmb3JlLlxyXG4gICAgICovXHJcbiAgICBQcm9taXNlUmVzb2x1dGlvblNvdXJjZS5wcm90b3R5cGUudHJ5UmVzb2x2ZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICB0aGlzLl9lbnN1cmVQcm9taXNlSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5fcmVzb2x2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSB0aGlzLl9yZWplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYW5jZWxzIHRoZSBkZXJpdmVkIGBQcm9taXNlYC5cclxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZGVyaXZlZCBgUHJvbWlzZWAgaGFzIGp1c3QgYmVlbiAqcmVqZWN0ZWQqIHdpdGggYFByb21pc2VDYW5jZWxsZWRFcnJvcmA7XHJcbiAgICAgKiBvdGhlcndpc2UgaXQgbWVhbnMgdGhlIGBQcm9taXNlYCBoYXMgYWxyZWFkeSBiZWVuICpzZXR0bGVkKiBiZWZvcmUuXHJcbiAgICAgKi9cclxuICAgIFByb21pc2VSZXNvbHV0aW9uU291cmNlLnByb3RvdHlwZS50cnlDYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZW5zdXJlUHJvbWlzZUluaXRpYWxpemVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlamVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWplY3QobmV3IGNhbmNlbGxhdGlvbl8xLlByb21pc2VDYW5jZWxsZWRFcnJvcigpKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IHRoaXMuX3JlamVjdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlamVjdHMgdGhlIGRlcml2ZWQgYFByb21pc2VgIHdpdGggdGhlIHNwZWNpZmllZCByYXNvbi5cclxuICAgICAqIEBwYXJhbSByZWFzb24gdGhlIHJlamVjdGlvbiByZWFzb24sIG9yIHRoZSBgRXJyb3JgIGNhdXNpbmcgdGhlIHJlamVjdGlvbi5cclxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZGVyaXZlZCBgUHJvbWlzZWAgaGFzIGp1c3QgYmVlbiAqcmVqZWN0ZWQqO1xyXG4gICAgICogb3RoZXJ3aXNlIGl0IG1lYW5zIHRoZSBgUHJvbWlzZWAgaGFzIGFscmVhZHkgYmVlbiAqc2V0dGxlZCogYmVmb3JlLlxyXG4gICAgICovXHJcbiAgICBQcm9taXNlUmVzb2x1dGlvblNvdXJjZS5wcm90b3R5cGUudHJ5UmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgIHRoaXMuX2Vuc3VyZVByb21pc2VJbml0aWFsaXplZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLl9yZWplY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSB0aGlzLl9yZWplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFByb21pc2VSZXNvbHV0aW9uU291cmNlO1xyXG59KCkpO1xyXG5leHBvcnRzLlByb21pc2VSZXNvbHV0aW9uU291cmNlID0gUHJvbWlzZVJlc29sdXRpb25Tb3VyY2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21pc2VSZXNvbHV0aW9uU291cmNlLmpzLm1hcCIsImltcG9ydCB7XHJcbiAgICBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSwgZGVsYXksIElDYW5jZWxsYXRpb25Ub2tlbiwgSVJlcXVlc3RQYXJhbXMsXHJcbiAgICBQcm9taXNlQ2FuY2VsbGVkRXJyb3IsIHNlbmRSZXF1ZXN0LCB5aWVsZGVkXHJcbn0gZnJvbSBcInRhc2tsaWtlLXByb21pc2UtbGlicmFyeVwiO1xyXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZHVwbGljYXRlLWltcG9ydHNcclxuaW1wb3J0ICogYXMgdHBsQW1iaWVudCBmcm9tIFwidGFza2xpa2UtcHJvbWlzZS1saWJyYXJ5XCI7XHJcblxyXG5mdW5jdGlvbiAkPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oc2VsZWN0b3I6IHN0cmluZywgc2NvcGU/OiBIVE1MRWxlbWVudCk6IFQgfCBudWxsIHtcclxuICAgIGlmIChzY29wZSkge1xyXG4gICAgICAgIHJldHVybiBzY29wZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSBhcyBUO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIGFzIFQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uTG9hZCgpIHtcclxuICAgICQoXCIjdHBsLXlpZWxkZWQtcnVuXCIpIS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcnVuRGVtbyhkZW1vWWllbGQsIFwiI3RwbC15aWVsZGVkLXBhbmVsXCIpKTtcclxuICAgICQoXCIjdHBsLWRlbGF5LXJ1blwiKSEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHJ1bkRlbW8oZGVtb0RlbGF5LCBcIiN0cGwtZGVsYXktcGFuZWxcIiwgXCIjdHBsLWRlbGF5LWNhbmNlbFwiKSk7XHJcbiAgICAkKFwiI3RwbC1zZW5kcmVxdWVzdC1ydW5cIikhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBydW5EZW1vKGRlbW9IdHRwLCBcIiN0cGwtc2VuZHJlcXVlc3QtcGFuZWxcIiwgXCIjdHBsLXNlbmRyZXF1ZXN0LWNhbmNlbFwiKSk7XHJcbiAgICAvLyBFeHBvc2UgVFBMIGxpYnJhcnkgdG8gdGhlIGRlYnVnZ2VyIGNvbnNvbGUuXHJcbiAgICAod2luZG93IGFzIHVua25vd24gYXMgeyBUUEw6IHR5cGVvZiB0cGxBbWJpZW50IH0pLlRQTCA9IHRwbEFtYmllbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkRXJyb3JQYW5lbChlcnJvcjogdW5rbm93bikge1xyXG4gICAgY29uc3QgZXJyQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGVyckJveC5jbGFzc0xpc3QuYWRkKFwiZXJyb3JcIik7XHJcbiAgICBlcnJCb3guaW5uZXJUZXh0ID0gZXJyb3IgJiYgKGVycm9yIGFzIHsgc3RhY2s/OiBzdHJpbmcgfSkuc3RhY2sgfHwgU3RyaW5nKGVycm9yKTtcclxuICAgIHJldHVybiBlcnJCb3g7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGVuZExpbmUoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY29udGVudDogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgbGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBsaW5lLmlubmVyVGV4dCA9IGNvbnRlbnQ7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGluZSk7XHJcbiAgICByZXR1cm4gbGluZTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcnVuRGVtbyhcclxuICAgIGRlbW9GdW5jOiAocGFuZWw6IEhUTUxFbGVtZW50LCBjYW5jZWxsYXRpb25Ub2tlbj86IElDYW5jZWxsYXRpb25Ub2tlbikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4sXHJcbiAgICBwYW5lbFNlbGVjdG9yOiBzdHJpbmcsXHJcbiAgICBjYW5jZWxsYXRpb25CdXR0b25TZWxlY3Rvcj86IHN0cmluZykge1xyXG4gICAgY29uc3QgY3RzID0gbmV3IENhbmNlbGxhdGlvblRva2VuU291cmNlKCk7XHJcbiAgICBjb25zdCBvbkNhbmNlbCA9ICgpID0+IHsgY3RzLmNhbmNlbCgpOyB9O1xyXG4gICAgY29uc3QgcGFuZWwgPSAkKHBhbmVsU2VsZWN0b3IpITtcclxuICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGNhbmNlbGxhdGlvbkJ1dHRvblNlbGVjdG9yID8gJDxIVE1MQnV0dG9uRWxlbWVudD4oY2FuY2VsbGF0aW9uQnV0dG9uU2VsZWN0b3IpIDogbnVsbDtcclxuICAgIGlmIChjYW5jZWxCdXR0b24pIHtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQ2FuY2VsKTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHBhbmVsLmlubmVyVGV4dCA9IFwiXCI7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRlbW9GdW5jKHBhbmVsLCBjYW5jZWxCdXR0b24gPyBjdHMudG9rZW4gOiB1bmRlZmluZWQpO1xyXG4gICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgYXdhaXQgcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGJ1aWxkRXJyb3JQYW5lbChlcnJvcikpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBpZiAoY2FuY2VsQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25DYW5jZWwpO1xyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZGVtb1lpZWxkKHBhbmVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgYXN5bmMgZnVuY3Rpb24gbXlBc3luY0Z1bmN0aW9uKCkge1xyXG4gICAgICAgIGFwcGVuZExpbmUocGFuZWwsIFwiQ2FsbGVlOiBEbyBzb21lIHdvcmsgc3luY2hyb25vdXNseSBpbiBteUFzeW5jRnVuY3Rpb27igKZcIik7XHJcbiAgICAgICAgYXBwZW5kTGluZShwYW5lbCwgXCJDYWxsZWU6IG15QXN5bmNGdW5jdGlvbiBpcyB0byB5aWVsZOKAplwiKTtcclxuICAgICAgICBhd2FpdCB5aWVsZGVkKCk7XHJcbiAgICAgICAgYXBwZW5kTGluZShwYW5lbCwgXCJDYWxsZWU6IGJhY2sgZnJvbSB5aWVsZGVkIHN0YXRl4oCmXCIpO1xyXG4gICAgICAgIGFwcGVuZExpbmUocGFuZWwsIFwiQ2FsbGVlOiBleGl0aW5nLlwiKTtcclxuICAgIH1cclxuICAgIGFwcGVuZExpbmUocGFuZWwsIFwiQ2FsbGVyOiBDYWxsIG15QXN5bmNGdW5jdGlvbi5cIik7XHJcbiAgICBteUFzeW5jRnVuY3Rpb24oKTtcclxuICAgIGFwcGVuZExpbmUocGFuZWwsIFwiQ2FsbGVyOiBXZSBkZWNpZGUgZG9uJ3QgYXdhaXQgZm9yIG15QXN5bmNGdW5jdGlvbi5cIik7XHJcbiAgICBhcHBlbmRMaW5lKHBhbmVsLCBcIkNhbGxlcjogZXhpdGluZy5cIik7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbW9EZWxheShwYW5lbDogSFRNTEVsZW1lbnQsIGN0PzogSUNhbmNlbGxhdGlvblRva2VuKSB7XHJcbiAgICBsZXQgbGFzdExpbmUgPSBhcHBlbmRMaW5lKHBhbmVsLCBcIkRlbGF5IDBtcyAoU2V0VGltZW91dCgwKSArIHlpZWxkZWQpLlwiKTtcclxuICAgIGF3YWl0IGRlbGF5KDAsIGN0KTtcclxuICAgIGxhc3RMaW5lLmlubmVyVGV4dCArPSBcIiBGaW5pc2hlZC5cIjtcclxuICAgIGxhc3RMaW5lID0gYXBwZW5kTGluZShwYW5lbCwgXCJEZWxheSA1MDBtcy5cIik7XHJcbiAgICBhd2FpdCBkZWxheSg1MDAsIGN0KTtcclxuICAgIGxhc3RMaW5lLmlubmVyVGV4dCArPSBcIiBGaW5pc2hlZC5cIjtcclxuICAgIGxhc3RMaW5lID0gYXBwZW5kTGluZShwYW5lbCwgXCJEZWxheSAxcy5cIik7XHJcbiAgICBhd2FpdCBkZWxheSgxMDAwLCBjdCk7XHJcbiAgICBsYXN0TGluZS5pbm5lclRleHQgKz0gXCIgRmluaXNoZWQuXCI7XHJcbiAgICBsYXN0TGluZSA9IGFwcGVuZExpbmUocGFuZWwsIFwiRGVsYXkgMnMuXCIpO1xyXG4gICAgYXdhaXQgZGVsYXkoMjAwMCwgY3QpO1xyXG4gICAgbGFzdExpbmUuaW5uZXJUZXh0ICs9IFwiIEZpbmlzaGVkLlwiO1xyXG4gICAgbGFzdExpbmUgPSBhcHBlbmRMaW5lKHBhbmVsLCBcIkRlbGF5IDNzLlwiKTtcclxuICAgIGF3YWl0IGRlbGF5KDMwMDAsIGN0KTtcclxuICAgIGxhc3RMaW5lLmlubmVyVGV4dCArPSBcIiBGaW5pc2hlZC5cIjtcclxuICAgIGFwcGVuZExpbmUocGFuZWwsIFwiLS0tLS0tLS0tLVwiKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZGVtb0h0dHAocGFuZWw6IEhUTUxFbGVtZW50LCBjdD86IElDYW5jZWxsYXRpb25Ub2tlbikge1xyXG4gICAgYXN5bmMgZnVuY3Rpb24gc2VuZEFuZFJlcG9ydChyZXF1ZXN0OiBJUmVxdWVzdFBhcmFtcykge1xyXG4gICAgICAgIGxldCBsYXN0TGluZSA9IGFwcGVuZExpbmUocGFuZWwsIGAke3JlcXVlc3QubWV0aG9kfSByZXF1ZXN0IHRvICR7cmVxdWVzdC51cmx94oCmYCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdChyZXF1ZXN0LCBjdCk7XHJcbiAgICAgICAgICAgIGxhc3RMaW5lLmlubmVyVGV4dCArPSBcIiBcIiArIHJlc3BvbnNlLnN0YXR1c0NvZGUgKyBcIiBcIiArIHJlc3BvbnNlLnN0YXR1c1RleHQ7XHJcbiAgICAgICAgICAgIGFwcGVuZExpbmUocGFuZWwsIFwiQ29udGVudC1UeXBlOiBcIiArIHJlc3BvbnNlLnhoci5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvZHlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xyXG4gICAgICAgICAgICBib2R5Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJodHRwLXJlc3BvbnNlLWJvZHlcIik7XHJcbiAgICAgICAgICAgIGJvZHlDb250YWluZXIuaW5uZXJUZXh0ID0gcmVzcG9uc2UueGhyLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoYm9keUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGxhc3RMaW5lID0gYXBwZW5kTGluZShwYW5lbCwgXCJlbnN1cmVTdWNjZXNzZnVsU3RhdHVzQ29kZeKAplwiKTtcclxuICAgICAgICAgICAgcmVzcG9uc2UuZW5zdXJlU3VjY2Vzc2Z1bFN0YXR1c0NvZGUoKTtcclxuICAgICAgICAgICAgbGFzdExpbmUuaW5uZXJUZXh0ICs9IFwiIFN1Y2Nlc3NmdWwuXCI7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvbWlzZUNhbmNlbGxlZEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydChjdCAmJiBjdC5pc0NhbmNlbGxhdGlvblJlcXVlc3RlZCk7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBjdCBpcyBjYW5jZWxsZWQsIHdlIHdvbid0IGNvbnRpbnVlIHRoZSBkZW1vXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChidWlsZEVycm9yUGFuZWwoZXJyb3IpKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBhcHBlbmRMaW5lKHBhbmVsLCBcIi0tLS0tLS0tLS1cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXdhaXQgc2VuZEFuZFJlcG9ydCh7IHVybDogXCIvdHNjb25maWcuanNvblwiLCBtZXRob2Q6IFwiR0VUXCIsIHRpbWVvdXQ6IDIwMDAgfSk7XHJcbiAgICBhd2FpdCBzZW5kQW5kUmVwb3J0KHsgdXJsOiBcIi90c2NvbmZpZy5qc29uXCIsIG1ldGhvZDogXCJQT1NUXCIgfSk7XHJcbn1cclxuXHJcbm9uTG9hZCgpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9